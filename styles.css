:root {
    --bg-color: #0a0a1a;
    --grid-bg: #101020;
    --grid-line: #222240;
    --player-color: #48e048;
    --zombie-color: #e04848;
    --wall-color: #6888c8;
    --exit-color: #e8d038;
    --text-color: #d8d8e0;
    --font-main: 'Press Start 2P', monospace;
    --font-header: 'Press Start 2P', monospace;

    --glow-player: none;
    --glow-zombie: none;
    --glow-wall: none;
    --glow-exit: none;
}

/* Accessibility: Screen reader only content */
.sr-only {
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
}

/* Accessibility: Skip link */
.skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--player-color);
    color: var(--bg-color);
    padding: 8px 16px;
    text-decoration: none;
    z-index: 10000;
    font-weight: bold;
    font-family: var(--font-header);
}

.skip-link:focus {
    top: 0;
    outline: 3px solid var(--exit-color);
    outline-offset: 2px;
}

/* Accessibility: Enhanced focus indicators */
*:focus {
    outline: 3px solid var(--player-color);
    outline-offset: 2px;
}

button:focus {
    outline: 3px solid var(--player-color);
    outline-offset: 2px;
}

.menu-item:focus {
    outline: 3px solid var(--player-color);
    transform: scale(1.03);
}

/* Accessibility: Ensure buttons are keyboard accessible */
button {
    cursor: pointer;
}

button:focus-visible {
    outline: 3px solid var(--player-color);
    outline-offset: 2px;
}

/* Accessibility: High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --bg-color: #000000;
        --player-color: #ffffff;
        --zombie-color: #ffff00;
        --exit-color: #00ff00;
        --wall-color: #ffffff;
        --text-color: #ffffff;
    }

    .cell {
        border: 2px solid #ffffff;
    }
}

/* Accessibility: Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

* {
    box-sizing: border-box;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

body {
    margin: 0;
    padding: 0;
    background-color: var(--bg-color);
    color: var(--text-color);
    font-family: var(--font-main);
    overflow: hidden;
    /* Prevent scrolling for game app feel */
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

#app {
    width: 100%;
    max-width: 600px;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 20px;
    position: relative;
}

header {
    text-align: center;
    margin-bottom: 10px;
}

h1 {
    font-family: var(--font-header);
    color: var(--player-color);
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
    font-size: 0.7rem;
    margin: 0 0 10px 0;
    letter-spacing: 1px;
}

#header-title {
    cursor: pointer;
}

#header-title:hover {
    opacity: 0.7;
}

/* Top bar with auth/settings buttons */
#auth-container {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 8px;
}

#user-display {
    color: var(--player-color);
    font-family: var(--font-header);
    font-size: 0.45rem;
    align-self: center;
}

.stats {
    display: flex;
    justify-content: space-between;
    padding: 0 10px;
    font-size: 0.55rem;
    font-weight: bold;
}

#game-container {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.grid-container {
    display: grid;
    /* Grid template columns will be set by JS */
    background-color: var(--grid-bg);
    border: 3px solid var(--grid-line);
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
    position: relative;
    width: 100%;
    aspect-ratio: 1 / 1;
    /* Force square */
    max-height: 80vh;
    /* Don't overflow screen */
    image-rendering: pixelated;
}

.cell {
    width: 100%;
    height: 100%;
    /* Aspect ratio handled by grid setup in JS or container */
    border: 1px solid rgba(128, 128, 128, 0.08);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.5rem;
    /* Emoji size */
    position: relative;
}

/* Coordinate labels for local debugging (A1, B2, etc.) */
.coord-label {
    position: absolute;
    bottom: 1px;
    right: 2px;
    font-size: 0.5rem;
    color: rgba(255, 255, 255, 0.4);
    font-family: monospace;
    pointer-events: none;
    z-index: 10;
}

/* Entities */
.player {
    background-color: transparent;
    box-shadow: none;
    position: relative;
}

.player::after {
    content: '';
    width: 70%;
    height: 70%;
    background-color: var(--player-color);
    border-radius: 0;
    box-shadow:
        inset 2px 2px 0 rgba(255, 255, 255, 0.4),
        inset -2px -2px 0 rgba(0, 0, 0, 0.4);
}

.player.dead::after {
    transform: rotate(90deg) !important;
    animation: none !important;
    transition: transform 0.2s ease-in;
}

.zombie {
    background-color: transparent;
    box-shadow: none;
    position: relative;
}

.zombie::after {
    content: '';
    width: 70%;
    height: 70%;
    background-color: var(--zombie-color);
    border-radius: 0;
    transform: none;
    box-shadow:
        inset 2px 2px 0 rgba(255, 255, 255, 0.3),
        inset -2px -2px 0 rgba(0, 0, 0, 0.4),
        -3px -3px 0 var(--zombie-color),
        3px -3px 0 var(--zombie-color);
}

.wall {
    background-color: var(--wall-color);
    border: 1px solid var(--wall-color);
    box-shadow:
        inset 2px 2px 0 rgba(255, 255, 255, 0.3),
        inset -2px -2px 0 rgba(0, 0, 0, 0.3);
}

.exit {
    background-color: transparent;
    border: 3px solid var(--exit-color);
    box-shadow: none;
    animation: pixelBlink 1s step-end infinite;
}

@keyframes pixelBlink {
    0% {
        border-color: var(--exit-color);
    }

    50% {
        border-color: transparent;
    }

    100% {
        border-color: var(--exit-color);
    }
}

/* Keep pulse keyframes for theme skins that reference it */
@keyframes pulse {
    0% {
        box-shadow: 0 0 5px var(--exit-color);
    }

    50% {
        box-shadow: 0 0 20px var(--exit-color);
    }

    100% {
        box-shadow: 0 0 5px var(--exit-color);
    }
}

/* Overlay */
#message-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 100;
}

.hidden {
    display: none !important;
}

/* ==================== INTRO MENU ==================== */
#intro-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: var(--bg-color);
    z-index: 900;
    display: flex;
    justify-content: center;
    align-items: center;
}

#intro-menu.hidden {
    display: none !important;
}

.intro-container {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 30px;
    padding: 20px;
    max-width: 400px;
    width: 90%;
}

.intro-title {
    font-family: var(--font-header);
    color: var(--player-color);
    font-size: 1.2rem;
    line-height: 1.6;
    letter-spacing: 2px;
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

.intro-subtitle {
    font-family: var(--font-main);
    color: var(--wall-color);
    font-size: 0.5rem;
    letter-spacing: 1px;
}

.intro-buttons {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
    max-width: 300px;
}

.intro-btn {
    width: 100%;
    padding: 14px 24px;
    font-size: 0.65rem;
    text-align: center;
}

/* ==================== FULLSCREEN MENU OVERLAY ==================== */
#fullscreen-menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(10, 10, 26, 0.97);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
}

@keyframes menuFadeIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

.menu-container {
    width: 95%;
    max-width: 600px;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 30px;
    padding: 30px;
}

#menu-title {
    font-family: var(--font-header);
    font-size: 1rem;
    color: var(--player-color);
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
    letter-spacing: 2px;
    margin: 0;
    text-transform: uppercase;
}

@keyframes titleGlow {
    from {
        text-shadow: 0 0 20px var(--player-color), 0 0 40px var(--player-color);
    }

    to {
        text-shadow: 0 0 30px var(--player-color), 0 0 60px var(--player-color), 0 0 80px var(--player-color);
    }
}

.menu-grid {
    display: flex;
    flex-direction: column;
    gap: 14px;
    width: 100%;
    max-height: 60vh;
    overflow-y: auto;
    padding: 10px;
    scrollbar-width: thin;
    scrollbar-color: var(--player-color) transparent;
}

.menu-grid::-webkit-scrollbar {
    width: 6px;
}

.menu-grid::-webkit-scrollbar-track {
    background: transparent;
}

.menu-grid::-webkit-scrollbar-thumb {
    background: var(--player-color);
    border-radius: 0;
}

/* ==================== SKIN CARDS / MENU ITEMS ==================== */
.menu-item {
    background: rgba(20, 20, 40, 0.9);
    border: 2px solid rgba(100, 100, 120, 0.3);
    border-radius: 0;
    padding: 16px 20px;
    cursor: pointer;
    transition: none;
    position: relative;
    overflow: visible;
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
    width: 100%;
    height: auto;
    min-height: 140px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.menu-item::before {
    content: none;
}

.menu-item:hover::before {
    left: 100%;
}

.menu-item:hover {
    border-color: var(--wall-color);
    transform: translate(-2px, -2px);
    box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.5);
}

.menu-item.active {
    border-color: var(--player-color);
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
}

.menu-item.active::after {
    content: '>';
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 0.8rem;
    color: var(--player-color);
    text-shadow: none;
    font-family: var(--font-header);
}

.menu-item.locked {
    opacity: 0.5;
    cursor: not-allowed;
    filter: grayscale(0.7);
}

.menu-item.locked::after {
    content: 'ðŸ”’';
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 1.2rem;
}

/* Preview Section - Real game cells */
.menu-item-preview {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 14px;
}

.skin-preview-cells {
    display: flex;
    gap: 6px;
    justify-content: center;
    padding: 8px 12px;
    border-radius: 4px;
    background: var(--bg-color, #0a0a1a);
}

.skin-cell {
    width: 48px !important;
    height: 48px !important;
    border: 1px solid rgba(128, 128, 128, 0.15) !important;
    position: relative !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    font-size: 1.2rem !important;
}

.menu-item-title {
    font-family: var(--font-header);
    font-size: 0.85rem;
    color: #e0e0e8;
    text-align: center;
    margin-bottom: 8px;
    letter-spacing: 1px;
}

.menu-item-desc {
    font-family: var(--font-main);
    font-size: 0.5rem;
    color: rgba(200, 200, 210, 0.8);
    text-align: center;
    line-height: 2;
}

/* Close Button at bottom */
#menu-close-btn {
    margin-top: 20px;
    padding: 12px 40px;
    font-size: 0.55rem;
}

/* ==================== THEME PREVIEW CLASSES ==================== */
/* Apply theme variables to menu items for accurate preview */
.menu-item.theme-neon {
    --bg-color: #1a1a1a;
    --player-color: #0f0;
    --zombie-color: #f00;
    --accent-color: #0ff;
}

.menu-item.theme-classic {
    --bg-color: #0a1a0a;
    --player-color: #00ff00;
    --zombie-color: #ff6600;
    --accent-color: #33ff33;
}

.menu-item.theme-graveyard {
    --bg-color: #1a1510;
    --player-color: #8bc34a;
    --zombie-color: #9c27b0;
    --accent-color: #607d8b;
}

.menu-item.theme-contrast {
    --bg-color: #000000;
    --player-color: #ffffff;
    --zombie-color: #ffff00;
    --accent-color: #00ffff;
}

/* ==================== RESPONSIVE ADJUSTMENTS ==================== */
@media (max-width: 600px) {
    #menu-title {
        font-size: 0.7rem;
        letter-spacing: 1px;
    }

    .menu-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
    }

    .menu-item {
        padding: 15px;
    }

    .preview-part {
        width: 25px;
        height: 25px;
    }

    .menu-item-title {
        font-size: 0.5rem;
    }

    .menu-container {
        padding: 20px;
        gap: 20px;
    }
}

#message-title {
    font-family: var(--font-header);
    font-size: 1.2rem;
    margin: 0 0 10px 0;
    color: var(--zombie-color);
    /* Default, JS can change to Green for Win */
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
    text-transform: uppercase;
}

.btn {
    background: transparent;
    border: 2px solid;
    border-radius: 0;
    padding: 12px 24px;
    margin: 10px;
    font-family: var(--font-header);
    font-size: 0.6rem;
    cursor: pointer;
    transition: none;
    text-transform: uppercase;
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
}

.btn:active {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

.btn.primary {
    border-color: var(--player-color);
    color: var(--player-color);
}

.btn.primary:hover {
    background: var(--player-color);
    color: #000;
}

.btn.secondary {
    border-color: var(--wall-color);
    color: var(--wall-color);
}

.btn.secondary:hover {
    background: var(--wall-color);
    color: #000;
}

/* Small variant for toolbar buttons */
.btn-small {
    font-size: 0.45rem;
    padding: 6px 10px;
    margin: 0;
    box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

.btn-small:active {
    transform: translate(1px, 1px);
    box-shadow: 1px 1px 0 rgba(0, 0, 0, 0.5);
}

/* Footer / Controls */
footer {
    text-align: center;
    padding-top: 8px;
    flex-shrink: 0;
}

.controls-hint {
    font-size: 0.5rem;
    color: #666;
    margin-bottom: 8px;
}

.audio-controls {
    margin-top: 8px;
}

.bmc-link {
    margin-top: 6px;
}

.bmc-link a {
    color: var(--text-color);
    opacity: 0.35;
    font-family: var(--font-main);
    font-size: 0.35rem;
    text-decoration: none;
    letter-spacing: 1px;
}

.bmc-link a:hover {
    opacity: 0.7;
}

.mobile-hint {
    display: none;
}

#mobile-controls {
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.dpad-row {
    display: flex;
    gap: 10px;
}

.dpad-btn {
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid #444;
    color: #fff;
    border-radius: 0;
    font-size: 1.2rem;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.5);
    transition: none;
}

.dpad-btn:active {
    background: rgba(0, 255, 0, 0.3);
    border-color: var(--player-color);
    transform: translate(2px, 2px);
    box-shadow: 1px 1px 0 rgba(0, 0, 0, 0.5);
}

/* Responsive */
@media (max-width: 768px) {
    .desktop-hint {
        display: none;
    }

    .mobile-hint {
        display: inline;
    }

    #mobile-controls {
        display: none;
    }

    body {
        padding: 0;
    }

    #app {
        padding: 6px;
    }

    header {
        margin-bottom: 4px;
    }

    #auth-container {
        gap: 4px;
        margin-bottom: 4px;
    }

    .btn-small {
        font-size: 0.4rem;
        padding: 5px 8px;
    }

    .stats {
        font-size: 0.45rem;
        padding: 0 5px;
    }

    .controls-hint {
        font-size: 0.4rem;
        margin-bottom: 4px;
    }

    footer {
        padding-top: 4px;
    }

    .dpad-btn {
        width: 44px;
        height: 44px;
        font-size: 1rem;
    }

    .audio-controls {
        margin-top: 4px;
    }

    /* Make grid fit */
    .cell {
        font-size: 1rem;
    }
}

/* ================================================================
   CRT SCANLINE OVERLAY
   ================================================================ */

#crt-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9998;
    mix-blend-mode: multiply;
    background: repeating-linear-gradient(0deg,
            rgba(0, 0, 0, 0.15) 0px,
            rgba(0, 0, 0, 0.15) 2px,
            transparent 2px,
            transparent 4px);
}

/* Hide scanlines when reduced motion is preferred */
@media (prefers-reduced-motion: reduce) {
    #crt-overlay {
        display: none;
    }
}

/* Hide scanlines when neon theme is active */
#crt-overlay {
    display: none;
}

/* ================================================================
   NEON THEME - Cyberpunk Shapes & Glow Effects
   Original cyberpunk/neon aesthetic with geometric shapes and glows.
   ================================================================ */

.theme-neon {
    --bg-color: #1a1a1a;
    --grid-bg: #222;
    --grid-line: #333;
    --player-color: #0f0;
    --zombie-color: #f00;
    --wall-color: #0ff;
    --exit-color: #ff0;
    --text-color: #eee;
    --font-main: 'Courier Prime', monospace;
    --font-header: 'Orbitron', sans-serif;

    --glow-player: 0 0 10px var(--player-color), 0 0 20px var(--player-color);
    --glow-zombie: 0 0 10px var(--zombie-color);
    --glow-wall: 0 0 5px var(--wall-color);
    --glow-exit: 0 0 15px var(--exit-color);
}

.theme-neon .grid-container {
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.1);
    border: 2px solid var(--grid-line);
    image-rendering: auto;
}

.theme-neon .player {
    background-color: rgba(0, 255, 0, 0.2);
    box-shadow: inset 0 0 10px var(--player-color);
}

.theme-neon .player::after {
    width: 60%;
    height: 60%;
    background-color: var(--player-color);
    border-radius: 50%;
    box-shadow: var(--glow-player);
}

.theme-neon .zombie {
    background-color: rgba(255, 0, 0, 0.2);
    box-shadow: inset 0 0 10px var(--zombie-color);
}

.theme-neon .zombie::after {
    width: 70%;
    height: 70%;
    background-color: var(--zombie-color);
    transform: rotate(45deg);
    box-shadow: var(--glow-zombie);
}

.theme-neon .wall {
    background-color: rgba(0, 255, 255, 0.1);
    border: 1px solid var(--wall-color);
    box-shadow: var(--glow-wall);
}

.theme-neon .exit {
    background-color: rgba(255, 255, 0, 0.1);
    border: 1px dashed var(--exit-color);
    box-shadow: var(--glow-exit);
    animation: pulse 1.5s infinite;
}

/* Neon h1 */
.theme-neon h1 {
    text-shadow: 0 0 5px var(--player-color);
    font-size: 1.5rem;
    letter-spacing: 2px;
}

.theme-neon .stats {
    font-size: 1.2rem;
}

.theme-neon .controls-hint {
    font-size: 0.8rem;
    opacity: 1;
}

.theme-neon #user-display {
    font-size: 0.7rem;
}

/* Neon overlay */
.theme-neon #message-overlay {
    backdrop-filter: blur(5px);
}

.theme-neon #message-title {
    font-size: 3rem;
    text-shadow: 0 0 10px currentColor;
}

/* Neon menu */
.theme-neon #fullscreen-menu-overlay {
    background: linear-gradient(135deg, rgba(10, 10, 15, 0.98), rgba(20, 20, 30, 0.98));
    backdrop-filter: blur(20px);
}

.theme-neon #menu-title {
    font-size: 2.5rem;
    text-shadow: 0 0 30px var(--player-color), 0 0 60px var(--player-color);
    letter-spacing: 4px;
    animation: titleGlow 2s ease-in-out infinite alternate;
}

/* Neon buttons */
.theme-neon .btn {
    transition: all 0.2s;
    border-radius: revert;
    box-shadow: none;
    font-size: 1.2rem;
    padding: 15px 30px;
}

.theme-neon .btn-small {
    font-size: 0.7rem;
    padding: 6px 12px;
    margin: 0;
}

.theme-neon .btn:active {
    transform: none;
    box-shadow: none;
}

.theme-neon .btn.primary {
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.2);
}

.theme-neon .btn.primary:hover {
    box-shadow: 0 0 20px var(--player-color);
}

/* Neon menu items */
.theme-neon .menu-item {
    background: linear-gradient(145deg, rgba(40, 40, 50, 0.8), rgba(25, 25, 35, 0.9));
    border-radius: 12px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: none;
}

.theme-neon .menu-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
    transition: left 0.5s ease;
}

.theme-neon .menu-item:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4), 0 0 30px rgba(0, 255, 255, 0.1);
}

.theme-neon .menu-item:hover::before {
    left: 100%;
}

.theme-neon .menu-item.active::after {
    content: 'âœ“';
    font-size: 1.2rem;
    text-shadow: 0 0 10px var(--player-color);
    font-family: inherit;
}

.theme-neon .menu-item.active {
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.3), inset 0 0 30px rgba(0, 255, 0, 0.05);
}

.theme-neon .menu-item-title {
    font-size: 1.1rem;
    letter-spacing: 2px;
}

.theme-neon .menu-item-desc {
    font-size: 0.8rem;
    line-height: 1.4;
}

.theme-neon .preview-part {
    border-radius: 6px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transition: transform 0.2s ease;
}

/* Neon d-pad */
.theme-neon .dpad-btn {
    border-radius: 8px;
    box-shadow: none;
    transition: all 0.2s;
}

.theme-neon .dpad-btn:active {
    transform: none;
    box-shadow: none;
}

/* Neon theme responsive */
@media (max-width: 768px) {
    .theme-neon h1 {
        font-size: 1.2rem;
    }

    .theme-neon #menu-title {
        font-size: 1.5rem;
    }

    .theme-neon .menu-item-title {
        font-size: 0.9rem;
    }
}

/* ================================================================
   FOREST THEME - Pixel Art in Spooky Forest
   ================================================================ */

.theme-forest {
    --bg-color: #0a1f0a;
    --grid-bg: #071507;
    --grid-line: #1a3a1a;
    --player-color: #4fc3f7;
    --zombie-color: #7cb342;
    --wall-color: #2e7d32;
    --exit-color: #ffd700;
    --text-color: #a5d6a7;
}

/* Retro Grid Style - More pixelated feel */
.theme-forest .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #3d2a6b;
    box-shadow: 0 0 30px rgba(255, 87, 34, 0.2), inset 0 0 20px rgba(0, 0, 0, 0.5);
    image-rendering: pixelated;
}

.theme-forest .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* ==================== RETRO PLAYER - 8-bit Person ==================== */
.theme-forest .player {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-forest .player::after {
    content: '';
    width: 70%;
    height: 80%;
    background: transparent;
    background-color: transparent !important;
    border-radius: 0;
    transform: none;
    position: relative;
    /* Using CSS to create a simple 8-bit person silhouette */
    background-image:
        /* Head */
        linear-gradient(to right, transparent 30%, #ffcc80 30%, #ffcc80 70%, transparent 70%),
        /* Body */
        linear-gradient(to right, transparent 20%, #4fc3f7 20%, #4fc3f7 80%, transparent 80%),
        /* Legs */
        linear-gradient(to right, transparent 25%, #1976d2 25%, #1976d2 45%, transparent 45%, transparent 55%, #1976d2 55%, #1976d2 75%, transparent 75%);
    background-size:
        100% 30%,
        100% 35%,
        100% 25%;
    background-position:
        center 0%,
        center 35%,
        center 75%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    /* No glow - only internal details */
    box-shadow: none !important;
    animation: playerBob 0.8s ease-in-out infinite;
}

@keyframes playerBob {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-5%);
    }
}

/* ==================== RETRO ZOMBIE - 8-bit Monster ==================== */
.theme-forest .zombie {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-forest .zombie::after {
    content: '';
    width: 75%;
    height: 85%;
    background: transparent;
    background-color: transparent !important;
    border-radius: 0;
    transform: none;
    position: relative;
    /* Using CSS to create a zombie silhouette */
    background-image:
        /* Head - green */
        linear-gradient(to right, transparent 25%, #7cb342 25%, #7cb342 75%, transparent 75%),
        /* Eyes row */
        linear-gradient(to right, transparent 25%, #7cb342 25%, #7cb342 35%, #f44336 35%, #f44336 42%, #7cb342 42%, #7cb342 58%, #f44336 58%, #f44336 65%, #7cb342 65%, #7cb342 75%, transparent 75%),
        /* Mouth */
        linear-gradient(to right, transparent 25%, #7cb342 25%, #7cb342 40%, #33691e 40%, #33691e 60%, #7cb342 60%, #7cb342 75%, transparent 75%),
        /* Body - torn clothes */
        linear-gradient(to right, transparent 20%, #795548 20%, #795548 80%, transparent 80%),
        /* Legs */
        linear-gradient(to right, transparent 25%, #5d4037 25%, #5d4037 42%, transparent 42%, transparent 58%, #5d4037 58%, #5d4037 75%, transparent 75%);
    background-size:
        100% 20%,
        100% 15%,
        100% 12%,
        100% 28%,
        100% 20%;
    background-position:
        center 0%,
        center 18%,
        center 32%,
        center 48%,
        center 80%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    box-shadow: none !important;
    animation: zombieShuffle 0.6s ease-in-out infinite;
}

/* Zombie arms - extended outward */
.theme-forest .zombie::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 15%;
    top: 35%;
    left: 0;
    background-image:
        linear-gradient(to right, #7cb342 0%, #7cb342 15%, transparent 15%, transparent 85%, #7cb342 85%, #7cb342 100%);
    background-repeat: no-repeat;
}

@keyframes zombieShuffle {

    0%,
    100% {
        transform: translateX(0) rotate(0deg);
    }

    25% {
        transform: translateX(-3%) rotate(-2deg);
    }

    75% {
        transform: translateX(3%) rotate(2deg);
    }
}

/* ==================== FOREST WALL - Tree Sprites ==================== */
.theme-forest .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: flex-end;
}

.theme-forest .wall::after {
    content: '';
    width: 80%;
    height: 90%;
    background: transparent;
    position: relative;
    /* Tree using CSS gradients */
    background-image:
        /* Tree crown - dark green top */
        linear-gradient(to right, transparent 25%, #1b5e20 25%, #1b5e20 75%, transparent 75%),
        /* Tree crown - middle */
        linear-gradient(to right, transparent 15%, #2e7d32 15%, #2e7d32 85%, transparent 85%),
        /* Tree crown - wide base */
        linear-gradient(to right, transparent 10%, #388e3c 10%, #388e3c 90%, transparent 90%),
        /* Trunk */
        linear-gradient(to right, transparent 35%, #5d4037 35%, #5d4037 65%, transparent 65%);
    background-size:
        100% 25%,
        100% 20%,
        100% 25%,
        100% 35%;
    background-position:
        center 0%,
        center 20%,
        center 40%,
        center 70%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
}

/* Subtle tree sway animation */
@keyframes treeSway {

    0%,
    100% {
        transform: rotate(0deg);
    }

    50% {
        transform: rotate(1deg);
    }
}

/* ==================== FOREST EXIT - Pixel Flower ==================== */
.theme-forest .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-forest .exit::after {
    content: '';
    width: 85%;
    height: 85%;
    background: transparent;
    position: relative;
    /* Pixel flower with petals */
    background-image:
        /* Top petal */
        linear-gradient(to right, transparent 35%, #ff69b4 35%, #ff69b4 65%, transparent 65%),
        /* Left petal */
        linear-gradient(to right, transparent 15%, #ff69b4 15%, #ff69b4 35%, transparent 35%, transparent 65%, #ff69b4 65%, #ff69b4 85%, transparent 85%),
        /* Center - yellow */
        linear-gradient(to right, transparent 35%, #ffd700 35%, #ffd700 65%, transparent 65%),
        /* Bottom petals */
        linear-gradient(to right, transparent 15%, #ff69b4 15%, #ff69b4 35%, transparent 35%, transparent 65%, #ff69b4 65%, #ff69b4 85%, transparent 85%),
        /* Bottom petal */
        linear-gradient(to right, transparent 35%, #ff69b4 35%, #ff69b4 65%, transparent 65%),
        /* Stem */
        linear-gradient(to right, transparent 45%, #2e7d32 45%, #2e7d32 55%, transparent 55%);
    background-size:
        100% 18%,
        100% 18%,
        100% 20%,
        100% 18%,
        100% 18%,
        100% 25%;
    background-position:
        center 0%,
        center 15%,
        center 32%,
        center 52%,
        center 68%,
        center 85%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 6px rgba(255, 105, 180, 0.6));
    animation: flowerSway 2s ease-in-out infinite;
}

@keyframes flowerSway {

    0%,
    100% {
        transform: rotate(-2deg);
    }

    50% {
        transform: rotate(2deg);
    }
}

/* ==================== RETRO HEADER STYLING ==================== */
.theme-forest h1 {
    color: #ff9800;
    text-shadow:
        2px 2px 0 #f44336,
        4px 4px 0 #bf360c;
    font-family: var(--font-header);
    letter-spacing: 3px;
}

.theme-forest .stats span {
    color: #ffd700;
}

/* ==================== MENU PREVIEW FOR NEON SKIN ==================== */
.menu-item.theme-neon .preview-part:nth-child(1) {
    background: #1a1a1a;
}

.menu-item.theme-neon .preview-part:nth-child(2) {
    background: #0f0;
    border-radius: 50%;
}

.menu-item.theme-neon .preview-part:nth-child(3) {
    background: #f00;
    transform: rotate(45deg);
    border-radius: 0;
}

.menu-item.theme-neon .preview-part:nth-child(4) {
    background: #0ff;
    border-radius: 0;
}

/* ==================== MENU PREVIEW FOR FOREST SKIN ==================== */
.menu-item.theme-forest .preview-part:nth-child(1) {
    background: #071507;
}

.menu-item.theme-forest .preview-part:nth-child(2) {
    background: linear-gradient(135deg, #4fc3f7 50%, #1976d2 50%);
}

.menu-item.theme-forest .preview-part:nth-child(3) {
    background: linear-gradient(135deg, #7cb342 50%, #558b2f 50%);
}

.menu-item.theme-forest .preview-part:nth-child(4) {
    background: linear-gradient(135deg, #2e7d32 33%, #1b5e20 66%, #5d4037 100%);
}

/* ================================================================
   INDIANA THEME - 16-bit Adventure Explorer Style
   ================================================================ */

.theme-indiana {
    --bg-color: #3e2723;
    --grid-bg: #2c1810;
    --grid-line: #5d4037;
    --player-color: #d4a574;
    --zombie-color: #4a7c3f;
    --wall-color: #8d6e63;
    --exit-color: #ffd700;
    --text-color: #ffcc80;
}

.theme-indiana .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #795548;
    box-shadow: 0 0 30px rgba(139, 69, 19, 0.3), inset 0 0 20px rgba(0, 0, 0, 0.5);
    image-rendering: pixelated;
}

.theme-indiana .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* ==================== INDIANA PLAYER - Explorer with Fedora ==================== */
.theme-indiana .player {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-indiana .player::after {
    content: '';
    width: 75%;
    height: 85%;
    background: transparent;
    background-color: transparent !important;
    border-radius: 0;
    transform: none;
    position: relative;
    /* Explorer with fedora hat */
    background-image:
        /* Hat brim */
        linear-gradient(to right, transparent 15%, #5d4037 15%, #5d4037 85%, transparent 85%),
        /* Hat crown */
        linear-gradient(to right, transparent 25%, #6d4c41 25%, #6d4c41 75%, transparent 75%),
        /* Face */
        linear-gradient(to right, transparent 30%, #d4a574 30%, #d4a574 70%, transparent 70%),
        /* Eyes and face details */
        linear-gradient(to right, transparent 30%, #d4a574 30%, #d4a574 40%, #333 40%, #333 45%, #d4a574 45%, #d4a574 55%, #333 55%, #333 60%, #d4a574 60%, #d4a574 70%, transparent 70%),
        /* Jacket - brown leather */
        linear-gradient(to right, transparent 20%, #8b4513 20%, #8b4513 80%, transparent 80%),
        /* Pants - khaki */
        linear-gradient(to right, transparent 25%, #c4a35a 25%, #c4a35a 45%, transparent 45%, transparent 55%, #c4a35a 55%, #c4a35a 75%, transparent 75%);
    background-size:
        100% 12%,
        100% 12%,
        100% 15%,
        100% 10%,
        100% 30%,
        100% 20%;
    background-position:
        center 0%,
        center 8%,
        center 20%,
        center 32%,
        center 48%,
        center 80%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    box-shadow: none !important;
    animation: explorerBob 0.8s ease-in-out infinite;
}

@keyframes explorerBob {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-5%);
    }
}

/* ==================== INDIANA ZOMBIE - Snake/Serpent ==================== */
.theme-indiana .zombie {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-indiana .zombie::after {
    content: '';
    width: 80%;
    height: 80%;
    background: transparent;
    background-color: transparent !important;
    border-radius: 0;
    transform: none;
    position: relative;
    /* Snake/serpent */
    background-image:
        /* Head */
        linear-gradient(to right, transparent 20%, #4a7c3f 20%, #4a7c3f 80%, transparent 80%),
        /* Eyes - yellow */
        linear-gradient(to right, transparent 25%, #4a7c3f 25%, #4a7c3f 35%, #ffeb3b 35%, #ffeb3b 42%, #4a7c3f 42%, #4a7c3f 58%, #ffeb3b 58%, #ffeb3b 65%, #4a7c3f 65%, #4a7c3f 75%, transparent 75%),
        /* Tongue */
        linear-gradient(to right, transparent 40%, #4a7c3f 40%, #4a7c3f 45%, #f44336 45%, #f44336 55%, #4a7c3f 55%, #4a7c3f 60%, transparent 60%),
        /* Body coil 1 */
        linear-gradient(to right, transparent 15%, #388e3c 15%, #388e3c 85%, transparent 85%),
        /* Body coil 2 */
        linear-gradient(to right, transparent 20%, #4a7c3f 20%, #4a7c3f 80%, transparent 80%),
        /* Body coil 3 */
        linear-gradient(to right, transparent 25%, #2e7d32 25%, #2e7d32 75%, transparent 75%);
    background-size:
        100% 20%,
        100% 12%,
        100% 10%,
        100% 18%,
        100% 18%,
        100% 18%;
    background-position:
        center 0%,
        center 15%,
        center 28%,
        center 42%,
        center 62%,
        center 82%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    box-shadow: none !important;
    animation: snakeSlither 0.6s ease-in-out infinite;
}

@keyframes snakeSlither {

    0%,
    100% {
        transform: translateX(0) scaleX(1);
    }

    25% {
        transform: translateX(-3%) scaleX(0.98);
    }

    75% {
        transform: translateX(3%) scaleX(1.02);
    }
}

/* ==================== INDIANA WALL - Temple Stone Blocks ==================== */
.theme-indiana .wall {
    background: linear-gradient(145deg,
            #a1887f 0%,
            #8d6e63 25%,
            #795548 50%,
            #6d4c41 75%,
            #5d4037 100%);
    border: 2px solid #4e342e;
    box-shadow:
        inset 2px 2px 4px rgba(255, 255, 255, 0.2),
        inset -2px -2px 4px rgba(0, 0, 0, 0.3);
    position: relative;
}

/* Stone block cracks/details */
.theme-indiana .wall::before {
    content: '';
    position: absolute;
    top: 30%;
    left: 20%;
    width: 60%;
    height: 40%;
    border: 1px solid rgba(0, 0, 0, 0.3);
    border-radius: 0;
}

/* ==================== INDIANA EXIT - Golden Skull ==================== */
.theme-indiana .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-indiana .exit::after {
    content: '';
    width: 85%;
    height: 90%;
    background: transparent;
    position: relative;
    /* Golden skull design */
    background-image:
        /* Skull crown */
        linear-gradient(to right, transparent 20%, #ffd700 20%, #ffd700 80%, transparent 80%),
        /* Upper skull */
        linear-gradient(to right, transparent 15%, #ffb300 15%, #ffb300 85%, transparent 85%),
        /* Eye sockets - black */
        linear-gradient(to right, transparent 20%, #ffd700 20%, #ffd700 30%, #1a1a1a 30%, #1a1a1a 40%, #ffd700 40%, #ffd700 60%, #1a1a1a 60%, #1a1a1a 70%, #ffd700 70%, #ffd700 80%, transparent 80%),
        /* Nose cavity */
        linear-gradient(to right, transparent 35%, #ffc107 35%, #ffc107 42%, #2d2d2d 42%, #2d2d2d 58%, #ffc107 58%, #ffc107 65%, transparent 65%),
        /* Teeth row */
        linear-gradient(to right, transparent 25%, #ffd700 25%, #ffd700 30%, #fff59d 30%, #fff59d 35%, #ffd700 35%, #ffd700 40%, #fff59d 40%, #fff59d 45%, #ffd700 45%, #ffd700 55%, #fff59d 55%, #fff59d 60%, #ffd700 60%, #ffd700 65%, #fff59d 65%, #fff59d 70%, #ffd700 70%, #ffd700 75%, transparent 75%),
        /* Jaw */
        linear-gradient(to right, transparent 30%, #e6a200 30%, #e6a200 70%, transparent 70%);
    background-size:
        100% 20%,
        100% 18%,
        100% 18%,
        100% 14%,
        100% 15%,
        100% 12%;
    background-position:
        center 0%,
        center 16%,
        center 32%,
        center 48%,
        center 62%,
        center 80%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.8)) drop-shadow(0 0 15px rgba(255, 152, 0, 0.5));
    animation: skullGlow 1.5s ease-in-out infinite;
}

@keyframes skullGlow {

    0%,
    100% {
        filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.8)) drop-shadow(0 0 15px rgba(255, 152, 0, 0.5));
    }

    50% {
        filter: drop-shadow(0 0 15px rgba(255, 215, 0, 1)) drop-shadow(0 0 25px rgba(255, 152, 0, 0.8));
    }
}

@keyframes idolGlow {

    0%,
    100% {
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 152, 0, 0.5);
    }

    50% {
        box-shadow: 0 0 25px rgba(255, 215, 0, 1), 0 0 50px rgba(255, 152, 0, 0.8);
    }
}

/* Indiana theme header */
.theme-indiana h1 {
    color: #ffd700;
    text-shadow: 3px 3px 0 #5d4037, 0 0 20px rgba(255, 215, 0, 0.5);
    letter-spacing: 3px;
}

.theme-indiana .stats span {
    color: #ffcc80;
}

/* ==================== MENU PREVIEW FOR INDIANA SKIN ==================== */
.menu-item.theme-indiana .preview-part:nth-child(1) {
    background: #2c1810;
}

.menu-item.theme-indiana .preview-part:nth-child(2) {
    background: linear-gradient(135deg, #d4a574 30%, #8b4513 70%);
}

.menu-item.theme-indiana .preview-part:nth-child(3) {
    background: linear-gradient(135deg, #4a7c3f 50%, #2e7d32 50%);
}

.menu-item.theme-indiana .preview-part:nth-child(4) {
    background: linear-gradient(135deg, #a1887f 33%, #795548 66%, #5d4037 100%);
}

/* ================================================================
   KAIJU THEME - Giant Monster Attacks the City!
   ================================================================ */

.theme-kaiju {
    --bg-color: #2d2d2d;
    --grid-bg: #3a3a3a;
    --grid-line: #4a4a4a;
    --player-color: #4ecca3;
    --zombie-color: #2e7d32;
    --wall-color: #5d6d7e;
    --exit-color: #f8b500;
    --text-color: #eee;
}

.theme-kaiju .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #5d6d7e;
    box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.6);
    image-rendering: pixelated;
    /* Destroyed asphalt texture */
    background-image:
        radial-gradient(ellipse 15% 20% at 20% 30%, rgba(50, 50, 50, 0.8) 0%, transparent 70%),
        radial-gradient(ellipse 20% 15% at 70% 60%, rgba(45, 45, 45, 0.7) 0%, transparent 70%),
        radial-gradient(ellipse 10% 25% at 40% 80%, rgba(55, 55, 55, 0.6) 0%, transparent 70%),
        radial-gradient(ellipse 18% 12% at 85% 20%, rgba(40, 40, 40, 0.7) 0%, transparent 70%);
}

.theme-kaiju .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
    /* Subtle crack lines */
    background-image:
        linear-gradient(135deg, transparent 45%, rgba(30, 30, 30, 0.3) 46%, rgba(30, 30, 30, 0.3) 48%, transparent 49%);
}

/* ==================== KAIJU PLAYER - Japanese Civilian ==================== */
.theme-kaiju .player {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-kaiju .player::after {
    content: '';
    width: 70%;
    height: 85%;
    background: transparent;
    position: relative;
    /* Japanese civilian running */
    background-image:
        /* Hair - black */
        linear-gradient(to right, transparent 30%, #1a1a1a 30%, #1a1a1a 70%, transparent 70%),
        /* Face */
        linear-gradient(to right, transparent 32%, #f5d0c5 32%, #f5d0c5 68%, transparent 68%),
        /* Eyes */
        linear-gradient(to right, transparent 35%, #f5d0c5 35%, #f5d0c5 42%, #1a1a1a 42%, #1a1a1a 46%, #f5d0c5 46%, #f5d0c5 54%, #1a1a1a 54%, #1a1a1a 58%, #f5d0c5 58%, #f5d0c5 65%, transparent 65%),
        /* Shirt - white/light blue */
        linear-gradient(to right, transparent 25%, #e3f2fd 25%, #e3f2fd 75%, transparent 75%),
        /* Pants - dark */
        linear-gradient(to right, transparent 28%, #37474f 28%, #37474f 45%, transparent 45%, transparent 55%, #37474f 55%, #37474f 72%, transparent 72%);
    background-size:
        100% 18%,
        100% 18%,
        100% 10%,
        100% 30%,
        100% 25%;
    background-position:
        center 0%,
        center 15%,
        center 28%,
        center 45%,
        center 78%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    animation: civilianRun 0.4s ease-in-out infinite;
}

@keyframes civilianRun {

    0%,
    100% {
        transform: translateY(0) translateX(0);
    }

    25% {
        transform: translateY(-5%) translateX(2%);
    }

    75% {
        transform: translateY(-5%) translateX(-2%);
    }
}

/* ==================== KAIJU ZOMBIE - GODZILLA Monster ==================== */
.theme-kaiju .zombie {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-kaiju .zombie::after {
    content: '';
    width: 90%;
    height: 95%;
    background: transparent;
    position: relative;
    /* Godzilla - giant monster */
    background-image:
        /* Dorsal spines - iconic spikes */
        linear-gradient(to right, transparent 15%, #1b5e20 15%, #1b5e20 25%, transparent 25%, transparent 35%, #2e7d32 35%, #2e7d32 45%, transparent 45%, transparent 55%, #2e7d32 55%, #2e7d32 65%, transparent 65%, transparent 75%, #1b5e20 75%, #1b5e20 85%, transparent 85%),
        /* Head - massive */
        linear-gradient(to right, transparent 20%, #2e7d32 20%, #2e7d32 80%, transparent 80%),
        /* Angry eyes - glowing orange/red */
        linear-gradient(to right, transparent 25%, #2e7d32 25%, #2e7d32 35%, #ff5722 35%, #ff5722 42%, #2e7d32 42%, #2e7d32 58%, #ff5722 58%, #ff5722 65%, #2e7d32 65%, #2e7d32 75%, transparent 75%),
        /* Open mouth with atomic glow */
        linear-gradient(to right, transparent 30%, #2e7d32 30%, #2e7d32 38%, #64b5f6 38%, #64b5f6 62%, #2e7d32 62%, #2e7d32 70%, transparent 70%),
        /* Massive body */
        linear-gradient(to right, transparent 10%, #388e3c 10%, #388e3c 90%, transparent 90%),
        /* Arms - small T-rex style */
        linear-gradient(to right, transparent 15%, #2e7d32 15%, #2e7d32 30%, transparent 30%, transparent 70%, #2e7d32 70%, #2e7d32 85%, transparent 85%),
        /* Thick legs */
        linear-gradient(to right, transparent 18%, #1b5e20 18%, #1b5e20 38%, transparent 38%, transparent 62%, #1b5e20 62%, #1b5e20 82%, transparent 82%);
    background-size:
        100% 12%,
        100% 15%,
        100% 10%,
        100% 8%,
        100% 28%,
        100% 12%,
        100% 18%;
    background-position:
        center 0%,
        center 10%,
        center 22%,
        center 32%,
        center 48%,
        center 62%,
        center 82%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    animation: godzillaRoar 0.8s ease-in-out infinite;
}

@keyframes godzillaRoar {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.08);
    }
}

/* ==================== KAIJU WALL - Tokyo Skyscrapers ==================== */
.theme-kaiju .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: flex-end;
}

.theme-kaiju .wall::after {
    content: '';
    width: 95%;
    height: 100%;
    background: transparent;
    position: relative;
    /* Tokyo skyscraper building */
    background-image:
        /* Rooftop antenna */
        linear-gradient(to right, transparent 47%, #4a5568 47%, #4a5568 53%, transparent 53%),
        /* Building top */
        linear-gradient(to right, transparent 15%, #5d6d7e 15%, #5d6d7e 85%, transparent 85%),
        /* Windows row 1 */
        linear-gradient(to right, transparent 18%, #4a5568 18%, #4a5568 22%, #ffeeba 22%, #ffeeba 28%, #4a5568 28%, #4a5568 35%, #ffeeba 35%, #ffeeba 41%, #4a5568 41%, #4a5568 48%, #ffeeba 48%, #ffeeba 54%, #4a5568 54%, #4a5568 61%, #ffeeba 61%, #ffeeba 67%, #4a5568 67%, #4a5568 74%, #ffeeba 74%, #ffeeba 80%, #4a5568 80%, #4a5568 82%, transparent 82%),
        /* Building middle */
        linear-gradient(to right, transparent 15%, #6b7c8d 15%, #6b7c8d 85%, transparent 85%),
        /* Windows row 2 */
        linear-gradient(to right, transparent 18%, #5d6d7e 18%, #5d6d7e 22%, #fff9c4 22%, #fff9c4 28%, #5d6d7e 28%, #5d6d7e 35%, #fff9c4 35%, #fff9c4 41%, #5d6d7e 41%, #5d6d7e 48%, #fff9c4 48%, #fff9c4 54%, #5d6d7e 54%, #5d6d7e 61%, #fff9c4 61%, #fff9c4 67%, #5d6d7e 67%, #5d6d7e 74%, #fff9c4 74%, #fff9c4 80%, #5d6d7e 80%, #5d6d7e 82%, transparent 82%),
        /* Windows row 3 */
        linear-gradient(to right, transparent 18%, #5d6d7e 18%, #5d6d7e 22%, #ffeeba 22%, #ffeeba 28%, #5d6d7e 28%, #5d6d7e 35%, #2d3748 35%, #2d3748 41%, #5d6d7e 41%, #5d6d7e 48%, #ffeeba 48%, #ffeeba 54%, #5d6d7e 54%, #5d6d7e 61%, #ffeeba 61%, #ffeeba 67%, #5d6d7e 67%, #5d6d7e 74%, #2d3748 74%, #2d3748 80%, #5d6d7e 80%, #5d6d7e 82%, transparent 82%),
        /* Building lower */
        linear-gradient(to right, transparent 15%, #4a5568 15%, #4a5568 85%, transparent 85%),
        /* Windows row 4 */
        linear-gradient(to right, transparent 18%, #3d4654 18%, #3d4654 22%, #fff9c4 22%, #fff9c4 28%, #3d4654 28%, #3d4654 35%, #fff9c4 35%, #fff9c4 41%, #3d4654 41%, #3d4654 48%, #2d3748 48%, #2d3748 54%, #3d4654 54%, #3d4654 61%, #fff9c4 61%, #fff9c4 67%, #3d4654 67%, #3d4654 74%, #fff9c4 74%, #fff9c4 80%, #3d4654 80%, #3d4654 82%, transparent 82%);
    background-size:
        100% 8%,
        100% 10%,
        100% 12%,
        100% 18%,
        100% 12%,
        100% 12%,
        100% 18%,
        100% 12%;
    background-position:
        center 0%,
        center 6%,
        center 16%,
        center 28%,
        center 42%,
        center 54%,
        center 66%,
        center 84%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
}

/* ==================== KAIJU EXIT - Girl to Rescue ==================== */
.theme-kaiju .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-kaiju .exit::after {
    content: '';
    width: 70%;
    height: 85%;
    background: transparent;
    position: relative;
    /* Girl character (damsel to rescue) */
    background-image:
        /* Hair */
        linear-gradient(to right, transparent 25%, #b45309 25%, #b45309 75%, transparent 75%),
        /* Hair sides */
        linear-gradient(to right, transparent 20%, #b45309 20%, #b45309 80%, transparent 80%),
        /* Face */
        linear-gradient(to right, transparent 30%, #fcd5ce 30%, #fcd5ce 70%, transparent 70%),
        /* Eyes and features */
        linear-gradient(to right, transparent 35%, #fcd5ce 35%, #fcd5ce 42%, #4a4a4a 42%, #4a4a4a 46%, #fcd5ce 46%, #fcd5ce 54%, #4a4a4a 54%, #4a4a4a 58%, #fcd5ce 58%, #fcd5ce 65%, transparent 65%),
        /* Dress top - red */
        linear-gradient(to right, transparent 25%, #e94560 25%, #e94560 75%, transparent 75%),
        /* Dress bottom - flowing */
        linear-gradient(to right, transparent 20%, #e94560 20%, #e94560 80%, transparent 80%);
    background-size:
        100% 15%,
        100% 12%,
        100% 18%,
        100% 10%,
        100% 22%,
        100% 25%;
    background-position:
        center 0%,
        center 12%,
        center 22%,
        center 36%,
        center 50%,
        center 75%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 8px rgba(248, 181, 0, 0.6));
    animation: girlWave 1.5s ease-in-out infinite;
}

@keyframes girlWave {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-3px);
    }
}

/* Kaiju theme header */
.theme-kaiju h1 {
    color: #4ecca3;
    text-shadow: 3px 3px 0 #e94560, 0 0 20px rgba(78, 204, 163, 0.5);
    letter-spacing: 3px;
}

.theme-kaiju .stats span {
    color: #f8b500;
}

/* ==================== MENU PREVIEW FOR KAIJU SKIN ==================== */
.menu-item.theme-kaiju .preview-part:nth-child(1) {
    background: #16213e;
}

.menu-item.theme-kaiju .preview-part:nth-child(2) {
    background: linear-gradient(135deg, #388e3c 50%, #2e7d32 50%);
}

.menu-item.theme-kaiju .preview-part:nth-child(3) {
    background: linear-gradient(135deg, #6d5d45 50%, #4a4a4a 50%);
}

.menu-item.theme-kaiju .preview-part:nth-child(4) {
    background: linear-gradient(135deg, #5d6d7e 33%, #f6e05e 66%, #4a5568 100%);
}

/* ================================================================
   PIRATE THEME - Boats, Treasure & High Seas Adventure!
   ================================================================ */

.theme-pirate {
    --bg-color: #87ceeb;
    --grid-bg: #4db8ff;
    --grid-line: #3aa0e6;
    --player-color: #cd8032;
    --zombie-color: #2d2d2d;
    --wall-color: #f4d03f;
    --exit-color: #ffd700;
    --text-color: #2c3e50;
}

.theme-pirate .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #cd8032;
    box-shadow: 0 0 30px rgba(30, 144, 255, 0.3), inset 0 0 20px rgba(0, 0, 0, 0.2);
    image-rendering: pixelated;
}

.theme-pirate .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* ==================== PIRATE PLAYER - Friendly Boat ==================== */
.theme-pirate .player {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-pirate .player::after {
    content: '';
    width: 85%;
    height: 85%;
    background: transparent;
    position: relative;
    /* Friendly sailing boat */
    background-image:
        /* Flag */
        linear-gradient(to right, transparent 45%, #e74c3c 45%, #e74c3c 55%, transparent 55%),
        /* Mast */
        linear-gradient(to right, transparent 48%, #5d4037 48%, #5d4037 52%, transparent 52%),
        /* Sail - white */
        linear-gradient(to right, transparent 30%, #f5f5f5 30%, #f5f5f5 70%, transparent 70%),
        /* Sail accent */
        linear-gradient(to right, transparent 32%, #f5f5f5 32%, #f5f5f5 68%, transparent 68%),
        /* Hull - brown wood */
        linear-gradient(to right, transparent 15%, #8b4513 15%, #8b4513 85%, transparent 85%),
        /* Hull bottom */
        linear-gradient(to right, transparent 25%, #6d3810 25%, #6d3810 75%, transparent 75%);
    background-size:
        100% 10%,
        100% 45%,
        100% 25%,
        100% 18%,
        100% 20%,
        100% 12%;
    background-position:
        center 0%,
        center 5%,
        center 20%,
        center 38%,
        center 62%,
        center 85%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 5px rgba(205, 128, 50, 0.5));
    animation: boatRock 2s ease-in-out infinite;
}

@keyframes boatRock {

    0%,
    100% {
        transform: rotate(-2deg);
    }

    50% {
        transform: rotate(2deg);
    }
}

/* ==================== PIRATE ZOMBIE - Enemy Skull Boat ==================== */
.theme-pirate .zombie {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-pirate .zombie::after {
    content: '';
    width: 85%;
    height: 85%;
    background: transparent;
    position: relative;
    /* Pirate ship with skull flag */
    background-image:
        /* Skull flag - white on black */
        linear-gradient(to right, transparent 40%, #1a1a1a 40%, #1a1a1a 60%, transparent 60%),
        /* Skull on flag */
        linear-gradient(to right, transparent 43%, #f5f5f5 43%, #f5f5f5 57%, transparent 57%),
        /* Mast */
        linear-gradient(to right, transparent 48%, #2d2d2d 48%, #2d2d2d 52%, transparent 52%),
        /* Tattered sail - black */
        linear-gradient(to right, transparent 25%, #2d2d2d 25%, #2d2d2d 75%, transparent 75%),
        /* Hull - dark wood */
        linear-gradient(to right, transparent 15%, #1a1a1a 15%, #1a1a1a 85%, transparent 85%),
        /* Hull detail */
        linear-gradient(to right, transparent 18%, #2d2d2d 18%, #2d2d2d 82%, transparent 82%);
    background-size:
        100% 12%,
        100% 6%,
        100% 40%,
        100% 22%,
        100% 22%,
        100% 10%;
    background-position:
        center 0%,
        center 4%,
        center 8%,
        center 28%,
        center 60%,
        center 85%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 4px rgba(45, 45, 45, 0.8));
    animation: pirateBoatRock 1.8s ease-in-out infinite;
}

@keyframes pirateBoatRock {

    0%,
    100% {
        transform: rotate(2deg);
    }

    50% {
        transform: rotate(-2deg);
    }
}

/* ==================== PIRATE WALL - Tropical Islands ==================== */
.theme-pirate .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: flex-end;
}

.theme-pirate .wall::after {
    content: '';
    width: 90%;
    height: 90%;
    background: transparent;
    position: relative;
    /* Tropical island with palm tree */
    background-image:
        /* Palm leaves - top */
        linear-gradient(to right, transparent 20%, #228b22 20%, #228b22 40%, transparent 40%, transparent 60%, #228b22 60%, #228b22 80%, transparent 80%),
        /* Palm leaves - middle */
        linear-gradient(to right, transparent 10%, #2e8b2e 10%, #2e8b2e 30%, transparent 30%, transparent 40%, #32cd32 40%, #32cd32 60%, transparent 60%, transparent 70%, #2e8b2e 70%, #2e8b2e 90%, transparent 90%),
        /* Palm trunk */
        linear-gradient(to right, transparent 42%, #8b4513 42%, #8b4513 58%, transparent 58%),
        /* Sand island base */
        linear-gradient(to right, transparent 15%, #f4d03f 15%, #f4d03f 85%, transparent 85%),
        /* Sand bottom */
        linear-gradient(to right, transparent 25%, #daa520 25%, #daa520 75%, transparent 75%);
    background-size:
        100% 18%,
        100% 15%,
        100% 35%,
        100% 25%,
        100% 15%;
    background-position:
        center 0%,
        center 12%,
        center 25%,
        center 65%,
        center 88%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
}

/* ==================== PIRATE EXIT - Treasure Chest ==================== */
.theme-pirate .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-pirate .exit::after {
    content: '';
    width: 90%;
    height: 80%;
    background: transparent;
    position: relative;
    /* Treasure chest with gold */
    background-image:
        /* Gold coins pile on top */
        linear-gradient(to right, transparent 20%, #ffd700 20%, #ffd700 35%, transparent 35%, transparent 45%, #ffd700 45%, #ffd700 55%, transparent 55%, transparent 65%, #ffd700 65%, #ffd700 80%, transparent 80%),
        /* More gold */
        linear-gradient(to right, transparent 15%, #ffb300 15%, #ffb300 85%, transparent 85%),
        /* Chest lid open */
        linear-gradient(to right, transparent 10%, #8b4513 10%, #8b4513 90%, transparent 90%),
        /* Lid edge */
        linear-gradient(to right, transparent 8%, #6d3810 8%, #6d3810 92%, transparent 92%),
        /* Chest body */
        linear-gradient(to right, transparent 10%, #a0522d 10%, #a0522d 90%, transparent 90%),
        /* Chest lock/detail */
        linear-gradient(to right, transparent 42%, #ffd700 42%, #ffd700 58%, transparent 58%);
    background-size:
        100% 12%,
        100% 15%,
        100% 15%,
        100% 8%,
        100% 40%,
        100% 12%;
    background-position:
        center 0%,
        center 10%,
        center 25%,
        center 38%,
        center 55%,
        center 75%;
    background-repeat: no-repeat;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8)) drop-shadow(0 0 20px rgba(255, 215, 0, 0.4));
    animation: treasureGlow 1.2s ease-in-out infinite;
}

@keyframes treasureGlow {

    0%,
    100% {
        filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8)) drop-shadow(0 0 20px rgba(255, 215, 0, 0.4));
    }

    50% {
        filter: drop-shadow(0 0 15px rgba(255, 215, 0, 1)) drop-shadow(0 0 30px rgba(255, 215, 0, 0.6));
    }
}

/* Pirate theme header */
.theme-pirate h1 {
    color: #1a3a5c;
    text-shadow: 2px 2px 0 rgba(255, 255, 255, 0.6);
    letter-spacing: 3px;
}

.theme-pirate .stats span {
    color: #1a3a5c;
}

/* ==================== MENU PREVIEW FOR PIRATE SKIN ==================== */
.menu-item.theme-pirate .preview-part:nth-child(1) {
    background: #0d2b4a;
}

.menu-item.theme-pirate .preview-part:nth-child(2) {
    background: linear-gradient(135deg, #8b4513 50%, #f5f5f5 50%);
}

.menu-item.theme-pirate .preview-part:nth-child(3) {
    background: linear-gradient(135deg, #1a1a1a 50%, #2d2d2d 50%);
}

.menu-item.theme-pirate .preview-part:nth-child(4) {
    background: linear-gradient(135deg, #ffd700 50%, #a0522d 50%);
}

/* ================================================================
   JUNGLE THEME - Rabbit Escapes the Fox!
   ================================================================ */

.theme-jungle {
    --bg-color: #2d5016;
    --grid-bg: #3d6b1e;
    --grid-line: #4a7c23;
    --player-color: #e0e0e0;
    --zombie-color: #d35400;
    --wall-color: #228b22;
    --exit-color: #ff6b00;
    --text-color: #f5f5dc;
}

.theme-jungle .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #2d5016;
    box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.4);
    image-rendering: pixelated;
    /* Grass texture */
    background-image:
        radial-gradient(ellipse 8% 15% at 15% 25%, rgba(60, 120, 30, 0.6) 0%, transparent 70%),
        radial-gradient(ellipse 10% 12% at 75% 40%, rgba(50, 100, 25, 0.5) 0%, transparent 70%),
        radial-gradient(ellipse 6% 18% at 45% 70%, rgba(70, 130, 35, 0.5) 0%, transparent 70%),
        radial-gradient(ellipse 12% 10% at 85% 80%, rgba(55, 110, 28, 0.6) 0%, transparent 70%);
}

.theme-jungle .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* ==================== JUNGLE PLAYER - Cute Rabbit ==================== */
.theme-jungle .player {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-jungle .player::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/jungle/player.svg') center / contain no-repeat !important;
    position: relative;
    border-radius: 0;
    box-shadow: none !important;
}

/* For dead state rotation */
.theme-jungle .player.dead::after {
    transform: rotate(90deg) !important;
}


/* ==================== JUNGLE ZOMBIE - Sneaky Fox ==================== */
.theme-jungle .zombie {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-jungle .zombie::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/jungle/zombie.svg') center / contain no-repeat !important;
    position: relative;
    border-radius: 0;
    box-shadow: none !important;
}


/* ==================== JUNGLE WALL - Dense Bushes ==================== */
.theme-jungle .wall {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-jungle .wall::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/jungle/wall.svg') center / contain no-repeat !important;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 0;
    box-shadow: none;
}


/* ==================== JUNGLE EXIT - Carrot (Rabbit's Goal!) ==================== */
.theme-jungle .exit {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-jungle .exit::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/jungle/exit.svg') center / contain no-repeat !important;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 0;
    box-shadow: none;
    animation: bounce 1s infinite alternate;
}

@keyframes carrotBounce {

    0%,
    100% {
        transform: translateY(0) rotate(-2deg);
    }

    50% {
        transform: translateY(-5%) rotate(2deg);
    }
}

/* Jungle theme header */
.theme-jungle h1 {
    color: #ff6b00;
    text-shadow: 3px 3px 0 #2d5016, 0 0 15px rgba(255, 107, 0, 0.4);
    letter-spacing: 3px;
}

.theme-jungle .stats span {
    color: #f5f5dc;
}

/* ==================== MENU PREVIEW FOR JUNGLE SKIN ==================== */
.menu-item.theme-jungle .preview-part:nth-child(1) {
    background: #3d6b1e;
}

.menu-item.theme-jungle .preview-part:nth-child(2) {
    background: linear-gradient(135deg, #f5f5f5 50%, #ffb6c1 50%);
}

.menu-item.theme-jungle .preview-part:nth-child(3) {
    background: linear-gradient(135deg, #d35400 50%, #f5f5f5 50%);
}


.menu-item.theme-jungle .preview-part:nth-child(4) {
    background: linear-gradient(135deg, #ff6b00 50%, #228b22 50%);
}

/* ================================================================
   SPACE THEME - Astronaut vs Aliens
   ================================================================ */
.theme-space {
    --bg-color: #000000;
    --grid-bg: #0b0b1a;
    --grid-line: #1a1a33;
    --player-color: #ffffff;
    --zombie-color: #00ff00;
    --wall-color: #4b0082;
    --exit-color: #00ffff;
    --text-color: #e0e0e0;
}

.theme-space .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #4b0082;
    box-shadow: 0 0 20px rgba(75, 0, 130, 0.5);
    image-rendering: pixelated;
    /* Starfield background */
    background-image:
        radial-gradient(white, rgba(255, 255, 255, .2) 2px, transparent 3px),
        radial-gradient(white, rgba(255, 255, 255, .15) 1px, transparent 2px),
        radial-gradient(white, rgba(255, 255, 255, .1) 2px, transparent 3px);
    background-size: 550px 550px, 350px 350px, 250px 250px;
    background-position: 0 0, 40px 60px, 130px 270px;
}

.theme-space .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* SPACE PLAYER - Astronaut */
.theme-space .player {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-space .player::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/space/player.svg') center / contain no-repeat !important;
    position: relative;
    border-radius: 0;
    box-shadow: none !important;
    animation: float 2s ease-in-out infinite;
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-5px);
    }
}

/* SPACE ZOMBIE - Alien */
.theme-space .zombie {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-space .zombie::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/space/zombie.svg') center / contain no-repeat !important;
    position: relative;
    border-radius: 0;
    box-shadow: none !important;
    filter: drop-shadow(0 0 5px #0f0);
}

/* SPACE WALL - Asteroid */
.theme-space .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-space .wall::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/space/wall.svg') center / contain no-repeat !important;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 0;
    box-shadow: none;
}

/* SPACE EXIT - Rocket */
.theme-space .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-space .exit::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/space/exit.svg') center / contain no-repeat !important;
    position: absolute;
    top: 0;
    left: 0;
}

/* Space Header */
.theme-space h1 {
    color: #0ff;
    text-shadow: 0 0 10px #0ff;
}

.theme-space .stats span {
    color: #fff;
}

.menu-item.theme-space .preview-part:nth-child(1) {
    background: #000;
}

.menu-item.theme-space .preview-part:nth-child(2) {
    background: linear-gradient(135deg, #fff 50%, #ddd 50%);
}

.menu-item.theme-space .preview-part:nth-child(3) {
    background: linear-gradient(135deg, #0f0 50%, #0d0 50%);
}

.menu-item.theme-space .preview-part:nth-child(4) {
    background: linear-gradient(135deg, #555 50%, #444 50%);
}

/* ================================================================
   DUNGEON THEME - Knight vs Skeletons
   ================================================================ */
.theme-dungeon {
    --bg-color: #1a1a1a;
    --grid-bg: #2b2b2b;
    --grid-line: #404040;
    --player-color: #c0c0c0;
    --zombie-color: #e0e0e0;
    --wall-color: #8b4513;
    --exit-color: #ffd700;
    --text-color: #d3d3d3;
}

.theme-dungeon .grid-container {
    background-color: var(--grid-bg);
    border: 4px solid #555;
    image-rendering: pixelated;
    background-image: repeating-linear-gradient(45deg, #252525 25%, transparent 25%, transparent 75%, #252525 75%, #252525), repeating-linear-gradient(45deg, #252525 25%, #2b2b2b 25%, #2b2b2b 75%, #252525 75%, #252525);
    background-position: 0 0, 10px 10px;
    background-size: 20px 20px;
}

.theme-dungeon .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* DUNGEON PLAYER - Knight */
.theme-dungeon .player {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-dungeon .player::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent;
    background-image: url('assets/skins/dungeon/player.svg');
    background-size: contain;
    background-position: center bottom;
    background-repeat: no-repeat;
    position: relative;
    border-radius: 0;
}

/* DUNGEON ZOMBIE - Skeleton */
.theme-dungeon .zombie {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-dungeon .zombie::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent;
    background-image: url('assets/skins/dungeon/zombie.svg');
    background-size: contain;
    background-position: center bottom;
    background-repeat: no-repeat;
    border-radius: 0;
    animation: rattle 2s linear infinite;
    /* Slower animation */
}

@keyframes rattle {

    0%,
    90% {
        transform: translateX(0);
    }

    92% {
        transform: translateX(-1px);
    }

    94% {
        transform: translateX(1px);
    }

    96% {
        transform: translateX(-1px);
    }

    98% {
        transform: translateX(1px);
    }

    100% {
        transform: translateX(0);
    }
}

/* DUNGEON WALL - Stone Wall */
.theme-dungeon .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-dungeon .wall::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent;
    background-image: url('assets/skins/dungeon/wall.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 0;
    box-shadow: none;
    animation: none;
    opacity: 1;
}

/* DUNGEON EXIT - Stairs */
.theme-dungeon .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-dungeon .exit::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/dungeon/exit.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    font-size: 0;
    /* Remove emoji */
    display: block;
    filter: drop-shadow(0 0 5px rgba(255, 87, 34, 0.5));
    /* Torch glow */
}

/* Dungeon Header */
.theme-dungeon h1 {
    color: #d4af37;
    text-shadow: 2px 2px #000;
}

.theme-dungeon .stats span {
    color: #ddd;
}

.menu-item.theme-dungeon .preview-part:nth-child(1) {
    background: #2b2b2b;
}

.menu-item.theme-dungeon .preview-part:nth-child(2) {
    background: linear-gradient(135deg, #ccc 50%, #999 50%);
}

.menu-item.theme-dungeon .preview-part:nth-child(3) {
    background: linear-gradient(135deg, #fff 50%, #ddd 50%);
}

.menu-item.theme-dungeon .preview-part:nth-child(4) {
    background: linear-gradient(135deg, #5a4a42 50%, #3e332e 50%);
}


/* ================================================================
   ARCADE THEME - Retro Pac-Style
   ================================================================ */
.theme-arcade {
    --bg-color: #000;
    --grid-bg: #000;
    --grid-line: #111;
    --player-color: #ff0;
    --zombie-color: #f00;
    --wall-color: #00f;
    --exit-color: #ffb8ae;
    --text-color: #fff;
}

.theme-arcade .grid-container {
    background-color: var(--grid-bg);
    border: 4px double #00f;
    box-shadow: 0 0 15px #00f;
}

.theme-arcade .cell {
    border: 1px dotted rgba(128, 128, 128, 0.08);
}

/* ARCADE PLAYER - Waka Waka */
.theme-arcade .player {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-arcade .player::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent;
    background-image: url('assets/skins/arcade/player.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    animation: none;
    /* SVG has internal animation */
    /* Reset */
    border-radius: 0;
    clip-path: none;
    transform: none;
}

@keyframes chomp {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

/* ARCADE ZOMBIE - Ghost */
.theme-arcade .zombie {
    background: transparent !important;
    box-shadow: none !important;
}

.theme-arcade .zombie::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent;
    position: relative;
    /* Ghost */
    background-image: url('assets/skins/arcade/zombie.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    border-radius: 0;
}

.theme-arcade .zombie {
    filter: drop-shadow(0 0 5px #f00);
}

/* ARCADE WALL - Blue Maze Lines */
.theme-arcade .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-arcade .wall::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/arcade/wall.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 0;
    box-shadow: none;
    border: none;
}

/* ARCADE EXIT - Cherry */
.theme-arcade .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-arcade .exit::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/arcade/exit.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: absolute;
    top: 0;
    left: 0;
    font-size: 0;
    /* Remove emoji text */
    display: block;
}

/* Arcade Header */
.theme-arcade h1 {
    color: #ff0;
    font-family: 'Courier New', monospace;
    font-size: 1.3rem;
    text-transform: uppercase;
}

.theme-arcade .stats span {
    color: #fff;
    font-family: 'Courier New', monospace;
}

.menu-item.theme-arcade .preview-part:nth-child(1) {
    background: #000;
}

.menu-item.theme-arcade .preview-part:nth-child(2) {
    background: #ff0;
    border-radius: 50%;
}

.menu-item.theme-arcade .preview-part:nth-child(3) {
    background: #f00;
    border-radius: 50% 50% 0 0;
}

.menu-item.theme-arcade .preview-part:nth-child(4) {
    background: transparent;
    border: 2px solid #00f;
}


/* ================================================================
   OCEAN THEME - Fish vs Shark
   ================================================================ */
.theme-ocean {
    --bg-color: #006994;
    --grid-bg: #0077be;
    --grid-line: #0099cc;
    --player-color: #ff9900;
    --zombie-color: #708090;
    --wall-color: #ff7f50;
    --exit-color: #fff;
    --text-color: #e0f7fa;
}

.theme-ocean .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #005f7f;
    box-shadow: inset 0 0 50px rgba(0, 0, 50, 0.3);
    image-rendering: pixelated;
    background-image:
        radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 5%),
        radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 5%),
        radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, transparent 10%);
    /* Bubbles */
    animation: oceanShift 5s infinite alternate;
}

@keyframes oceanShift {
    from {
        background-position: 0 0, 0 0, 0 0;
    }

    to {
        background-position: 0 -10px, 0 10px, 5px 0;
    }
}

.theme-ocean .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* OCEAN PLAYER - Clownfish */
.theme-ocean .player {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-ocean .player::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/ocean/player.svg') center / contain no-repeat !important;
    animation: swim 2s ease-in-out infinite;
    position: relative;
    border-radius: 0;
    box-shadow: none !important;
}

@keyframes swim {

    0%,
    100% {
        transform: translateY(0) rotate(0deg);
    }

    50% {
        transform: translateY(-3px) rotate(3deg);
    }
}

/* OCEAN ZOMBIE - Shark */
.theme-ocean .zombie {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-ocean .zombie::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/ocean/zombie.svg') center / contain no-repeat !important;
    animation: sharkSwim 3s linear infinite;
    position: relative;
    box-shadow: none !important;
}

@keyframes sharkSwim {
    0% {
        transform: translateX(-5%);
    }

    50% {
        transform: translateX(5%);
    }

    100% {
        transform: translateX(-5%);
    }
}

/* OCEAN WALL - Coral */
.theme-ocean .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-ocean .wall::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/ocean/wall.svg');
    background-size: contain;
    background-position: center bottom;
    background-repeat: no-repeat;
    position: absolute;
    bottom: 0;
    left: 0;
    border-radius: 0;
}

/* OCEAN EXIT - Pearl in Clam */
.theme-ocean .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-ocean .exit::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/ocean/exit.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 0;
    box-shadow: none;
}

/* Ocean Header */
.theme-ocean h1 {
    color: #00ffff;
    text-shadow: 0 0 10px #0000ff;
}

.theme-ocean .stats span {
    color: #e0f7fa;
}

.menu-item.theme-ocean .preview-part:nth-child(1) {
    background: #0077be;
}

.menu-item.theme-ocean .preview-part:nth-child(2) {
    background: linear-gradient(135deg, #ff9900 50%, #fff 50%);
}

.menu-item.theme-ocean .preview-part:nth-child(3) {
    background: linear-gradient(135deg, #708090 50%, #506070 50%);
}

.menu-item.theme-ocean .preview-part:nth-child(4) {
    background: linear-gradient(135deg, #ff7f50 50%, #ff6347 50%);
}


/* ================================================================
   HALLOWEEN THEME - Pumpkin vs Ghosts
   ================================================================ */
.theme-halloween {
    --bg-color: #2e0854;
    --grid-bg: #3d0a6e;
    --grid-line: #5a189a;
    --player-color: #ff7518;
    --zombie-color: #ffffff;
    --wall-color: #555555;
    --exit-color: #ffff00;
    --text-color: #ff9e42;
}

.theme-halloween .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #ff7518;
    box-shadow: 0 0 20px rgba(255, 117, 24, 0.4);
    image-rendering: pixelated;
}

.theme-halloween .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* HALLOWEEN PLAYER - Pumpkin */
.theme-halloween .player {
    background: transparent !important;
    box-shadow: none !important;
}

.theme-halloween .player::after {
    content: '';
    width: 80%;
    height: 70%;
    background: transparent;
    position: relative;
    /* Pumpkin */
    background-image:
        linear-gradient(to right, transparent 45%, #0f0 45%, #0f0 55%, transparent 55%),
        /* Stem */
        linear-gradient(to right, transparent 15%, #ff7518 15%, #ff7518 85%, transparent 85%);
    /* Body */
    background-size: 100% 20%, 100% 80%;
    background-position: center 0, center 100%;
    background-repeat: no-repeat;
    /* Face */
    box-shadow: inset 10px -10px 0 rgba(0, 0, 0, 0.1);
    border-radius: 40%;
}

.theme-halloween .player::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    /* Jack-o-lantern face */
    background-image:
        linear-gradient(to right, transparent 30%, #000 30%, #000 40%, transparent 40%, transparent 60%, #000 60%, #000 70%, transparent 70%),
        /* Eyes */
        linear-gradient(to right, transparent 35%, #000 35%, #000 65%, transparent 65%);
    /* Mouth */
    background-size: 100% 15%, 100% 10%;
    background-position: center 40%, center 70%;
    background-repeat: no-repeat;
    z-index: 2;
}

/* HALLOWEEN ZOMBIE - Ghost */
.theme-halloween .zombie {
    background: transparent !important;
    box-shadow: none !important;
}

.theme-halloween .zombie::after {
    content: '';
    width: 70%;
    height: 80%;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 50% 50% 0 0;
    box-shadow: 0 0 10px #fff;
    /* Eyes */
    background-image:
        radial-gradient(circle at 30% 40%, #000 15%, transparent 15%),
        radial-gradient(circle at 70% 40%, #000 15%, transparent 15%);
    animation: ghostFloat 1.5s ease-in-out infinite;
}

@keyframes ghostFloat {

    0%,
    100% {
        transform: translateY(0);
        opacity: 0.8;
    }

    50% {
        transform: translateY(-5px);
        opacity: 0.6;
    }
}

/* HALLOWEEN WALL - Tombstone */
.theme-halloween .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    display: flex;
    justify-content: center;
    align-items: flex-end;
}

.theme-halloween .wall::after {
    content: 'RIP';
    width: 70%;
    height: 80%;
    background: #555;
    border-radius: 50% 50% 0 0;
    color: #333;
    font-size: 0.6rem;
    font-weight: bold;
    display: flex;
    justify-content: center;
    align-items: center;
    padding-top: 10px;
    border: 2px solid #333;
    border-bottom: none;
}

/* HALLOWEEN EXIT - Haunted House / Candy Bowl */
.theme-halloween .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
}

.theme-halloween .exit::after {
    content: 'ðŸ¬';
    font-size: 2rem;
    filter: drop-shadow(0 0 5px orange);
    animation: candyBounce 1s infinite;
}

@keyframes candyBounce {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.2);
    }
}

/* Halloween Header */
.theme-halloween h1 {
    color: #ff7518;
    text-shadow: 0 0 5px #5a189a;
    font-family: 'Creepster', cursive, var(--font-header);
    font-size: 1.3rem;
}

.theme-halloween .stats span {
    color: #ff9e42;
}

.menu-item.theme-halloween .preview-part:nth-child(1) {
    background: #3d0a6e;
}

.menu-item.theme-halloween .preview-part:nth-child(2) {
    background: #ff7518;
    border-radius: 40%;
}

.menu-item.theme-halloween .preview-part:nth-child(3) {
    background: #fff;
    border-radius: 50% 50% 0 0;
}

.menu-item.theme-halloween .preview-part:nth-child(4) {
    background: #555;
    border-radius: 50% 50% 0 0;
}


/* ================================================================
   WINTER THEME - Penguin vs Polar Bear
   ================================================================ */
.theme-winter {
    --bg-color: #a3d5ff;
    --grid-bg: #e0f7fa;
    --grid-line: #b2ebf2;
    --player-color: #000;
    --zombie-color: #fff;
    --wall-color: #81d4fa;
    --exit-color: #ff9800;
    --text-color: #01579b;
}

.theme-winter .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #fff;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
    image-rendering: pixelated;
    background-image:
        radial-gradient(circle, #fff 10%, transparent 10%),
        /* Snow */
        radial-gradient(circle, #fff 10%, transparent 10%);
    background-size: 30px 30px;
    background-position: 0 0, 15px 15px;
}

.theme-winter .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* WINTER PLAYER - Penguin */
.theme-winter .player {
    background: transparent !important;
    box-shadow: none !important;
}

.theme-winter .player::after {
    content: '';
    width: 60%;
    height: 80%;
    background: #000;
    border-radius: 50% 50% 40% 40%;
    position: relative;
    /* Stomach */
    background-image:
        radial-gradient(circle at 50% 60%, #fff 60%, transparent 60%);
    background-size: 80% 60%;
    background-position: center 60%;
    background-repeat: no-repeat;
    /* Beak and feet */
    box-shadow:
        0 -35px 0 -5px orange,
        /* Beak (hacky) -> actually using pseudo */
        -5px 15px 0 orange,
        /* Left foot */
        5px 15px 0 orange;
    /* Right foot */
}

.theme-winter .player::before {
    content: '';
    position: absolute;
    top: 20%;
    left: 35%;
    width: 30%;
    height: 10%;
    background: orange;
    /* Beak */
    border-radius: 50%;
    z-index: 2;
}

/* WINTER ZOMBIE - Polar Bear (or Yeti) */
.theme-winter .zombie {
    background: transparent !important;
    box-shadow: none !important;
}

.theme-winter .zombie::after {
    content: '';
    width: 90%;
    height: 80%;
    background: #fff;
    border-radius: 40% 40% 30% 30%;
    position: relative;
    box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.1);
    /* Face */
    background-image:
        radial-gradient(circle at 30% 40%, #000 10%, transparent 10%),
        radial-gradient(circle at 70% 40%, #000 10%, transparent 10%),
        radial-gradient(circle at 50% 60%, #000 15%, transparent 15%);
    /* Nose */
}

/* WINTER WALL - Ice Block / Igloo */
.theme-winter .wall {
    background: rgba(129, 212, 250, 0.5) !important;
    border: 1px solid #fff !important;
    box-shadow: inset 0 0 10px #fff !important;
    backdrop-filter: blur(2px);
}

.theme-winter .wall::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.6) 50%, transparent 60%);
}

/* WINTER EXIT - Fish / Fire */
.theme-winter .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
}

.theme-winter .exit::after {
    content: 'ðŸŸ';
    font-size: 2rem;
    animation: flop 1s infinite;
}

@keyframes flop {

    0%,
    100% {
        transform: rotate(0deg);
    }

    50% {
        transform: rotate(20deg);
    }
}

/* Winter Header */
.theme-winter h1 {
    color: #01579b;
    text-shadow: 2px 2px 0 rgba(255, 255, 255, 0.6);
}

.theme-winter .stats span {
    color: #01579b;
}

.menu-item.theme-winter .preview-part:nth-child(1) {
    background: #e0f7fa;
}

.menu-item.theme-winter .preview-part:nth-child(2) {
    background: #000;
    border-radius: 50%;
}

.menu-item.theme-winter .preview-part:nth-child(3) {
    background: #fff;
    border-radius: 40%;
}

.menu-item.theme-winter .preview-part:nth-child(4) {
    background: #81d4fa;
    opacity: 0.7;
}


/* ================================================================
   PIZZA THEME - Pizza vs Pineapple
   ================================================================ */
.theme-pizza {
    --bg-color: #fff3e0;
    --grid-bg: #ffffff;
    --grid-line: #ffe0b2;
    --player-color: #ffca28;
    --zombie-color: #fdd835;
    --wall-color: #8d6e63;
    --exit-color: #a1887f;
    --text-color: #e65100;
}

.theme-pizza .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #e65100;
    /* Checkered tablecloth pattern */
    background-image:
        linear-gradient(45deg, #ffcdd2 25%, transparent 25%, transparent 75%, #ffcdd2 75%, #ffcdd2),
        linear-gradient(45deg, #ffcdd2 25%, transparent 25%, transparent 75%, #ffcdd2 75%, #ffcdd2);
    background-size: 40px 40px;
    background-position: 0 0, 20px 20px;
}

.theme-pizza .cell {
    border: 1px dashed rgba(230, 81, 0, 0.2);
}

/* PIZZA PLAYER - Whole Round Pizza */
.theme-pizza .player {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-pizza .player::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/pizza/player.svg');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
    animation: pizzaRoll 1s linear infinite;
    /* Reset CSS shapes */
    background-color: transparent;
    border: none;
    border-radius: 0;
    box-shadow: none;
}

/* Pepperoni Toppings - REMOVED (Included in SVG) */
.theme-pizza .player::before {
    content: none;
}

@keyframes pizzaRoll {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

/* PIZZA ZOMBIE - Pineapple */
.theme-pizza .zombie {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
}

.theme-pizza .zombie::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/pizza/zombie.svg');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    top: 0;

    /* Reset CSS shapes */
    background-color: transparent;
    border-radius: 0;
}

/* Leaves - REMOVED (Included in SVG) */
.theme-pizza .zombie::before {
    content: none;
}

/* PIZZA WALL - Table with Cutlery */
.theme-pizza .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-pizza .wall::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/pizza/wall.svg');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    bottom: 0;
    left: 0;

    /* Reset CSS shapes */
    background-color: transparent;
    border-radius: 0;
    box-shadow: none;
}

/* Plate - REMOVED (Included in SVG) */
.theme-pizza .wall::before {
    content: none;
}

/* PIZZA EXIT - Brick Oven */
.theme-pizza .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

/* Oven Body */
.theme-pizza .exit::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/pizza/exit.svg');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center bottom;
    bottom: 0;
    left: 0;

    /* Reset CSS shapes */
    background-color: transparent;
    border-radius: 0;
    box-shadow: none;
}

/* Oven Opening / Fire - REMOVED (Included in SVG) */
.theme-pizza .exit::before {
    content: none;
}

/* Pizza Header */
.theme-pizza h1 {
    color: #e65100;
    font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
    letter-spacing: 1px;
    text-shadow: 2px 2px 0 #fff;
}

.theme-pizza .stats span {
    color: #bf360c;
}

/* Menu Preview */
.menu-item.theme-pizza .preview-part:nth-child(1) {
    background: #fff3e0;
}

.menu-item.theme-pizza .preview-part:nth-child(2) {
    background: #ffca28;
    clip-path: polygon(50% 100%, 0 0, 100% 0);
}

.menu-item.theme-pizza .preview-part:nth-child(3) {
    background: #fdd835;
    border-radius: 4px;
}

.menu-item.theme-pizza .preview-part:nth-child(4) {
    background: #8d6e63;
}


/* ================================================================
   RETRO THEME - Game Boy Style
   ================================================================ */
.theme-retro {
    --bg-color: #8bac0f;
    --grid-bg: #9bbc0f;
    --grid-line: #8bac0f;
    --player-color: #306230;
    --zombie-color: #0f380f;
    --wall-color: #306230;
    --exit-color: #0f380f;
    --text-color: #0f380f;
}

.theme-retro .grid-container {
    background-color: var(--grid-bg);
    border: 4px solid #0f380f;
    box-shadow: inset 0 0 10px rgba(15, 56, 15, 0.5);
    background-image:
        linear-gradient(rgba(139, 172, 15, 0.2) 1px, transparent 1px),
        linear-gradient(90deg, rgba(139, 172, 15, 0.2) 1px, transparent 1px);
    background-size: 4px 4px;
}

.theme-retro .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* RETRO PLAYER - 8-bit Hero */
.theme-retro .player {
    background: transparent !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    overflow: visible;
}

.theme-retro .player::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent;
    background-image: url('assets/skins/retro/player.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    top: 0;
    left: 0;
    box-shadow: none;
    image-rendering: pixelated;
}

/* RETRO ZOMBIE - 8-bit Monster */
.theme-retro .zombie {
    background: transparent !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    overflow: visible;
}

.theme-retro .zombie::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent;
    background-image: url('assets/skins/retro/zombie.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    box-shadow: none;
    image-rendering: pixelated;
}

/* RETRO WALL - Block */
.theme-retro .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-retro .wall::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/retro/wall.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: absolute;
    top: 0;
    left: 0;
    image-rendering: pixelated;
}

/* RETRO EXIT - Flag */
.theme-retro .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-retro .exit::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/retro/exit.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: absolute;
    top: 0;
    left: 0;
    font-size: 0;
    /* Remove text */
    border: none;
    padding: 0;
    animation: none;
    image-rendering: pixelated;
}

@keyframes blink {
    50% {
        opacity: 0;
    }
}

/* Retro Header */
.theme-retro h1 {
    color: #0f380f;
    font-family: 'Courier New', monospace;
    font-size: 1.3rem;
    letter-spacing: -1px;
}

.theme-retro .stats span {
    color: #306230;
    font-family: 'Courier New', monospace;
}

.menu-item.theme-retro .preview-part:nth-child(1) {
    background: #9bbc0f;
}

.menu-item.theme-retro .preview-part:nth-child(2) {
    background: #306230;
}

.menu-item.theme-retro .preview-part:nth-child(3) {
    background: #0f380f;
}

.menu-item.theme-retro .preview-part:nth-child(4) {
    background: #306230;
    opacity: 0.8;
}


/* ================================================================
   ROBOTS THEME - Bot vs Bot
   ================================================================ */
.theme-robots {
    --bg-color: #263238;
    --grid-bg: #37474f;
    --grid-line: #546e7a;
    --player-color: #29b6f6;
    --zombie-color: #f44336;
    --wall-color: #607d8b;
    --exit-color: #00e676;
    --text-color: #b0bec5;
}

.theme-robots .grid-container {
    background-color: var(--grid-bg);
    border: 2px solid #546e7a;
    box-shadow: 0 0 10px #29b6f6;
    background-image:
        linear-gradient(0deg, transparent 24%, rgba(41, 182, 246, .1) 25%, rgba(41, 182, 246, .1) 26%, transparent 27%, transparent 74%, rgba(41, 182, 246, .1) 75%, rgba(41, 182, 246, .1) 76%, transparent 77%, transparent),
        linear-gradient(90deg, transparent 24%, rgba(41, 182, 246, .1) 25%, rgba(41, 182, 246, .1) 26%, transparent 27%, transparent 74%, rgba(41, 182, 246, .1) 75%, rgba(41, 182, 246, .1) 76%, transparent 77%, transparent);
    background-size: 50px 50px;
}

.theme-robots .cell {
    border: 1px solid rgba(128, 128, 128, 0.08);
}

/* ROBOT PLAYER - Friendly Bot */
.theme-robots .player {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-robots .player::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/robots/player.svg') center / contain no-repeat !important;
    position: relative;
    border-radius: 0;
    box-shadow: none !important;
}

/* ROBOT ZOMBIE - Evil Bot */
.theme-robots .zombie {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-robots .zombie::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/robots/zombie.svg') center / contain no-repeat !important;
    position: relative;
    border-radius: 0;
    box-shadow: none !important;
    animation: twitch 0.2s infinite;
}

@keyframes twitch {
    0% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(1px);
    }

    50% {
        transform: translateX(0);
    }

    75% {
        transform: translateX(-1px);
    }
}

/* ROBOT WALL - Metal Crate */
.theme-robots .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-robots .wall::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/robots/wall.svg') center / contain no-repeat !important;
    position: absolute;
    top: 0;
    left: 0;
}

/* ROBOT EXIT - Energy Core */
.theme-robots .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-robots .exit::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/robots/exit.svg') center / contain no-repeat !important;
    position: absolute;
    top: 0;
    left: 0;
    animation: pulse 2s infinite;
}



@keyframes pulseCore {
    from {
        box-shadow: 0 0 10px #00e676;
        transform: scale(0.9);
    }

    to {
        box-shadow: 0 0 30px #00e676;
        transform: scale(1.1);
    }
}

/* Robots Header */
.theme-robots h1 {
    color: #29b6f6;
    font-family: monospace;
    font-size: 1.3rem;
    text-transform: uppercase;
}

.theme-robots .stats span {
    color: #b0bec5;
    font-family: monospace;
}

.menu-item.theme-robots .preview-part:nth-child(1) {
    background: #37474f;
}

.menu-item.theme-robots .preview-part:nth-child(2) {
    background: #29b6f6;
    border-radius: 5px;
}

.menu-item.theme-robots .preview-part:nth-child(3) {
    background: #f44336;
    border-radius: 5px;
}

.menu-item.theme-robots .preview-part:nth-child(4) {
    background: #607d8b;
}

/* ================================================================
   THEME UI CHROME FIXES
   All non-neon themes inherit base 8-bit buttons/UI. These rules
   ensure buttons, d-pad, menus, and overlays look correct per theme.
   ================================================================ */

/* --- D-pad: use theme variables instead of hardcoded colors --- */
.dpad-btn {
    border-color: var(--wall-color);
    color: var(--text-color);
    background: rgba(128, 128, 128, 0.15);
}

.dpad-btn:active {
    border-color: var(--player-color);
    background: rgba(128, 128, 128, 0.3);
}

/* --- Controls hint: use theme text-color at lower opacity --- */
.controls-hint {
    color: var(--text-color);
    opacity: 0.5;
}

/* --- Menu overlay: adapt background to theme --- */
#fullscreen-menu-overlay {
    background: rgba(0, 0, 0, 0.95);
}

/* --- Menu items: slight bg tint from theme for non-neon --- */
.menu-item {
    background: rgba(0, 0, 0, 0.7);
    border-color: rgba(128, 128, 128, 0.3);
}

.menu-item:hover {
    border-color: var(--player-color);
}

.menu-item-title {
    color: var(--text-color);
}

/* ================================================================
   LIGHT-BACKGROUND THEME FIXES
   Pirate (#87ceeb), Winter (#a3d5ff), Food (#fff8e1), Retro (#8bac0f)
   ================================================================ */

/* --- PIRATE: sky blue bg, dark text --- */
.theme-pirate #user-display {
    color: #1a3a5c;
}

.theme-pirate .btn.secondary {
    border-color: #2c3e50;
    color: #2c3e50;
}

.theme-pirate .btn.secondary:hover {
    background: #2c3e50;
    color: #87ceeb;
}

.theme-pirate .btn.primary {
    border-color: #8b5e3c;
    color: #8b5e3c;
}

.theme-pirate .btn.primary:hover {
    background: #8b5e3c;
    color: #fff;
}

.theme-pirate .dpad-btn {
    border-color: #2c3e50;
    color: #2c3e50;
    background: rgba(255, 255, 255, 0.3);
}

.theme-pirate .dpad-btn:active {
    background: rgba(205, 128, 50, 0.3);
    border-color: #cd8032;
}

.theme-pirate .controls-hint {
    color: #2c3e50;
    opacity: 0.7;
}

.theme-pirate #fullscreen-menu-overlay {
    background: rgba(30, 60, 90, 0.97);
}

.theme-pirate #message-overlay {
    background-color: rgba(30, 60, 90, 0.92);
    color: #e0e0e0;
}

.theme-pirate #message-title {
    color: #ffd700;
}

.theme-pirate #message-overlay .btn.secondary {
    border-color: #f4d03f;
    color: #f4d03f;
}

.theme-pirate #message-overlay .btn.primary {
    border-color: #ffd700;
    color: #ffd700;
}

.theme-pirate #message-overlay .btn.primary:hover {
    background: #ffd700;
    color: #000;
}

.theme-pirate #message-overlay .btn.secondary:hover {
    background: #f4d03f;
    color: #000;
}

/* --- WINTER: light blue bg, dark text --- */
.theme-winter .btn.secondary {
    border-color: #01579b;
    color: #01579b;
}

.theme-winter .btn.secondary:hover {
    background: #01579b;
    color: #a3d5ff;
}

.theme-winter .btn.primary {
    border-color: #000;
    color: #000;
}

.theme-winter .btn.primary:hover {
    background: #000;
    color: #a3d5ff;
}

.theme-winter .dpad-btn {
    border-color: #01579b;
    color: #01579b;
    background: rgba(255, 255, 255, 0.3);
}

.theme-winter .dpad-btn:active {
    background: rgba(0, 0, 0, 0.15);
    border-color: #000;
}

.theme-winter .controls-hint {
    color: #01579b;
    opacity: 0.7;
}

.theme-winter #fullscreen-menu-overlay {
    background: rgba(0, 40, 80, 0.97);
}

.theme-winter #menu-title {
    color: #e0f7fa;
}

.theme-winter #menu-close-btn {
    border-color: #e0f7fa;
    color: #e0f7fa;
}

.theme-winter #menu-close-btn:hover {
    background: #e0f7fa;
    color: #000;
}

.theme-winter .menu-item-title {
    color: #e0f7fa;
}

.theme-winter .menu-item-desc {
    color: rgba(200, 230, 255, 0.7);
}

.theme-winter #message-overlay {
    background-color: rgba(0, 40, 80, 0.92);
    color: #e0e0e0;
}

.theme-winter #message-overlay .btn.secondary,
.theme-winter #message-overlay .btn.primary {
    border-color: #e0f7fa;
    color: #e0f7fa;
}

.theme-winter #message-overlay .btn.primary:hover {
    background: #e0f7fa;
    color: #000;
}

.theme-winter #message-title {
    color: #ff9800;
}

/* --- PIZZA: cream bg, dark text --- */
.theme-pizza #user-display {
    color: #e65100;
}

.theme-pizza .btn.secondary {
    border-color: #8d6e63;
    color: #8d6e63;
}

.theme-pizza .btn.secondary:hover {
    background: #8d6e63;
    color: #fff3e0;
}

.theme-pizza .btn.primary {
    border-color: #e65100;
    color: #e65100;
}

.theme-pizza .btn.primary:hover {
    background: #e65100;
    color: #fff;
}

.theme-pizza .dpad-btn {
    border-color: #8d6e63;
    color: #8d6e63;
    background: rgba(255, 255, 255, 0.4);
}

.theme-pizza .dpad-btn:active {
    background: rgba(230, 81, 0, 0.2);
    border-color: #e65100;
}

.theme-pizza .controls-hint {
    color: #8d6e63;
    opacity: 0.7;
}

.theme-pizza #fullscreen-menu-overlay {
    background: rgba(60, 30, 10, 0.97);
}

.theme-pizza #menu-close-btn {
    border-color: #ffe0b2;
    color: #ffe0b2;
}

.theme-pizza #menu-close-btn:hover {
    background: #ffe0b2;
    color: #3e2723;
}

.theme-pizza #message-overlay {
    background-color: rgba(60, 30, 10, 0.92);
    color: #e0e0e0;
}

.theme-pizza #message-title {
    color: #ffca28;
}

.theme-pizza #message-overlay .btn.secondary {
    border-color: #ffe0b2;
    color: #ffe0b2;
}

.theme-pizza #message-overlay .btn.primary {
    border-color: #4caf50;
    color: #4caf50;
}

.theme-pizza #message-overlay .btn.primary:hover {
    background: #4caf50;
    color: #000;
}

/* --- RETRO: Game Boy green bg --- */
.theme-retro #user-display {
    color: #0f380f;
}

.theme-retro .btn.secondary {
    border-color: #0f380f;
    color: #0f380f;
}

.theme-retro .btn.secondary:hover {
    background: #0f380f;
    color: #9bbc0f;
}

.theme-retro .btn.primary {
    border-color: #0f380f;
    color: #0f380f;
}

.theme-retro .btn.primary:hover {
    background: #0f380f;
    color: #9bbc0f;
}

.theme-retro .dpad-btn {
    border-color: #0f380f;
    color: #0f380f;
    background: rgba(155, 188, 15, 0.3);
}

.theme-retro .dpad-btn:active {
    background: rgba(15, 56, 15, 0.3);
    border-color: #0f380f;
}

.theme-retro .controls-hint {
    color: #306230;
    opacity: 0.8;
}

.theme-retro #fullscreen-menu-overlay {
    background: rgba(15, 56, 15, 0.97);
}

.theme-retro #menu-title {
    color: #9bbc0f;
}

.theme-retro #menu-close-btn {
    border-color: #9bbc0f;
    color: #9bbc0f;
}

.theme-retro #menu-close-btn:hover {
    background: #9bbc0f;
    color: #0f380f;
}

.theme-retro .menu-item-title {
    color: #9bbc0f;
}

.theme-retro .menu-item-desc {
    color: rgba(155, 188, 15, 0.7);
}

.theme-retro #message-overlay {
    background-color: rgba(15, 56, 15, 0.92);
    color: #9bbc0f;
}

.theme-retro #message-overlay .btn.secondary,
.theme-retro #message-overlay .btn.primary {
    border-color: #9bbc0f;
    color: #9bbc0f;
}

.theme-retro #message-overlay .btn.primary:hover {
    background: #9bbc0f;
    color: #0f380f;
}

.theme-retro #message-title {
    color: #9bbc0f;
}


/* ================================================================
   THEME-SPECIFIC MENU OVERLAY TINTING
   Match menu bg to theme atmosphere for dark-bg themes
   ================================================================ */

.theme-forest #fullscreen-menu-overlay {
    background: rgba(10, 31, 10, 0.97);
}

.theme-indiana #fullscreen-menu-overlay {
    background: rgba(42, 24, 16, 0.97);
}

.theme-kaiju #fullscreen-menu-overlay {
    background: rgba(30, 30, 30, 0.97);
}

.theme-jungle #fullscreen-menu-overlay {
    background: rgba(20, 40, 10, 0.97);
}

.theme-space #fullscreen-menu-overlay {
    background: rgba(0, 0, 10, 0.97);
}

.theme-dungeon #fullscreen-menu-overlay {
    background: rgba(15, 15, 15, 0.97);
}

.theme-arcade #fullscreen-menu-overlay {
    background: rgba(0, 0, 0, 0.97);
}

.theme-ocean #fullscreen-menu-overlay {
    background: rgba(0, 40, 70, 0.97);
}

.theme-halloween #fullscreen-menu-overlay {
    background: rgba(25, 5, 45, 0.97);
}

.theme-robots #fullscreen-menu-overlay {
    background: rgba(20, 25, 30, 0.97);
}

/* ================================================================
   FONT CONSISTENCY FOR CUSTOM-FONT THEMES
   Extend h1 font to buttons and stats for visual coherence
   ================================================================ */

/* Arcade: Courier New everywhere */
.theme-arcade .btn,
.theme-arcade .stats,
.theme-arcade .controls-hint,
.theme-arcade .menu-item-title,
.theme-arcade #menu-title,
.theme-arcade #message-title {
    font-family: 'Courier New', monospace;
}

/* Halloween: Creepster for headers/titles */
.theme-halloween #menu-title,
.theme-halloween #message-title {
    font-family: 'Creepster', cursive, var(--font-header);
}

/* Pizza: Comic Sans/Chalkboard for headers/titles */
.theme-pizza #menu-title,
.theme-pizza #message-title {
    font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
    letter-spacing: 1px;
}

/* Retro: Courier New everywhere */
.theme-retro .btn,
.theme-retro .stats,
.theme-retro .controls-hint,
.theme-retro .menu-item-title,
.theme-retro #menu-title,
.theme-retro #message-title {
    font-family: 'Courier New', monospace;
}

/* Robots: monospace everywhere */
.theme-robots .btn,
.theme-robots .stats,
.theme-robots .controls-hint,
.theme-robots .menu-item-title,
.theme-robots #menu-title,
.theme-robots #message-title {
    font-family: monospace;
}

/* ================================================================
   OCEAN THEME: fix message overlay contrast
   ================================================================ */

.theme-ocean #message-overlay {
    background-color: rgba(0, 50, 80, 0.92);
}

.theme-ocean #message-title {
    color: #00ffff;
}

/* ===========================
   ACCESSIBILITY MODES
   =========================== */

/* Colorblind Mode */
.colorblind-mode {
    --player-color: #0051ff;
    /* High-contrast blue */
    --zombie-color: #ff6600;
    /* High-contrast orange */
    --exit-color: #ffcc00;
    /* High-contrast yellow */
    --wall-color: #9933ff;
    /* High-contrast purple */
}

/* Add patterns to entities for colorblind users */
.colorblind-mode .cell.player::before {
    content: "P";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.2rem;
    font-weight: bold;
    color: white;
    text-shadow: 0 0 3px black;
}

.colorblind-mode .cell.zombie::before {
    content: "Z";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.2rem;
    font-weight: bold;
    color: white;
    text-shadow: 0 0 3px black;
}

.colorblind-mode .cell.exit::before {
    content: "E";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.2rem;
    font-weight: bold;
    color: black;
    text-shadow: 0 0 3px white;
}

.colorblind-mode .cell.wall {
    background: repeating-linear-gradient(45deg,
            var(--wall-color) 0px,
            var(--wall-color) 3px,
            transparent 3px,
            transparent 6px);
}

/* High Contrast Mode */
.high-contrast {
    --bg-color: #000000;
    --grid-bg: #000000;
    --player-color: #ffffff;
    --zombie-color: #ffff00;
    --exit-color: #00ff00;
    --wall-color: #ffffff;
    --text-color: #ffffff;
}

.high-contrast .cell {
    border: 2px solid #ffffff !important;
}

.high-contrast .cell.player {
    background: #ffffff !important;
    border: 3px solid #000000 !important;
}

.high-contrast .cell.zombie {
    background: #ffff00 !important;
    border: 3px solid #000000 !important;
}

.high-contrast .cell.exit {
    background: #00ff00 !important;
    border: 3px solid #000000 !important;
}

.high-contrast .cell.wall {
    background: #ffffff !important;
}

.high-contrast button {
    border: 2px solid #ffffff !important;
    background: #000000 !important;
    color: #ffffff !important;
}

.high-contrast button:hover,
.high-contrast button:focus {
    background: #ffffff !important;
    color: #000000 !important;
}

/* Reduced Motion Mode */
.reduced-motion,
.reduced-motion * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
}

/* Larger Text Mode */
.larger-text {
    font-size: 1.2em;
}

.larger-text h1 {
    font-size: 2.4rem;
}

.larger-text h2 {
    font-size: 2rem;
}

.larger-text button {
    font-size: 1.1rem;
    padding: 14px 20px;
}

.larger-text .cell {
    font-size: 1.2rem;
}

/* Ensure minimum touch target sizes (WCAG 2.1) */
button {
    min-width: 44px;
    min-height: 44px;
}

.dpad-btn {
    min-width: 60px;
    min-height: 60px;
}

.menu-item {
    /* Removed fixed min-height to allow content to dictate size */
}

/* Visual feedback for music playing */
.music-playing::before {
    content: "â™ª ";
    display: inline;
    animation: music-pulse 1s infinite;
}

@keyframes music-pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

/* Visual feedback flashes */
.visual-feedback {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    animation: flash 0.3s;
    z-index: 9999;
}

.visual-feedback.win {
    background: rgba(0, 255, 0, 0.2);
}

.visual-feedback.lose {
    background: rgba(255, 0, 0, 0.2);
}

.visual-feedback.move {
    background: rgba(0, 255, 255, 0.1);
}

@keyframes flash {

    0%,
    100% {
        opacity: 0;
    }

    50% {
        opacity: 1;
    }
}

/* ===========================
   COOKIE CONSENT BANNER
   =========================== */

.cookie-banner {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: #0a0a1a;
    border-top: 3px solid var(--player-color);
    box-shadow: 0 -4px 0 rgba(0, 0, 0, 0.5);
    padding: 20px;
    z-index: 10000;
}

@keyframes slideUp {
    from {
        transform: translateY(100%);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.cookie-content {
    max-width: 900px;
    margin: 0 auto;
    color: var(--text-color);
    font-family: var(--font-main);
}

.cookie-ascii {
    text-align: center;
    color: var(--player-color);
    font-size: 0.5rem;
    line-height: 1;
    margin-bottom: 10px;
    text-shadow: none;
}

.cookie-title {
    font-family: var(--font-header);
    color: var(--player-color);
    font-size: 0.7rem;
    margin: 10px 0;
    text-align: center;
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

.cookie-description {
    font-size: 0.5rem;
    line-height: 2;
    margin: 10px 0;
    color: var(--text-color);
}

.cookie-list {
    list-style: none;
    padding: 0;
    margin: 15px 0;
}

.cookie-list li {
    padding: 5px 0;
    font-size: 0.45rem;
    line-height: 1.8;
}

.cookie-icon {
    color: var(--player-color);
    margin-right: 8px;
}

.cookie-link {
    background: none;
    border: none;
    color: var(--wall-color);
    text-decoration: underline;
    cursor: pointer;
    font-family: var(--font-main);
    font-size: inherit;
    padding: 0;
    min-width: auto;
    min-height: auto;
}

.cookie-link:hover {
    color: var(--player-color);
}

.cookie-actions {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 20px;
    flex-wrap: wrap;
}

.cookie-actions .btn {
    font-size: 0.5rem;
    padding: 12px 24px;
    min-width: 150px;
}

/* Mobile optimization */
@media (max-width: 768px) {
    .cookie-banner {
        padding: 15px;
    }

    .cookie-title {
        font-size: 0.55rem;
    }

    .cookie-description {
        font-size: 0.4rem;
    }

    .cookie-ascii {
        font-size: 0.4rem;
    }

    .cookie-actions {
        flex-direction: column;
    }

    .cookie-actions .btn {
        width: 100%;
    }
}

/* ===========================
   PRIVACY POLICY MODAL
   =========================== */

.privacy-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    z-index: 10001;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    overflow-y: auto;
}

.privacy-content {
    background: #0a0a1a;
    border: 3px solid var(--player-color);
    border-radius: 0;
    max-width: 800px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.5);
}

@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

.privacy-header {
    background: #0a0a0a;
    border-bottom: 2px solid var(--player-color);
    padding: 20px;
    text-align: center;
}

.privacy-ascii {
    font-size: 0.45rem;
    color: var(--player-color);
    text-shadow: none;
    line-height: 1.2;
    margin-bottom: 10px;
}

.privacy-header h2 {
    font-family: var(--font-header);
    color: var(--player-color);
    font-size: 0.75rem;
    margin: 10px 0;
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
}

.privacy-body {
    padding: 30px;
    color: var(--text-color);
    font-family: var(--font-main);
}

.privacy-section {
    margin-bottom: 30px;
}

.privacy-section h3 {
    font-family: var(--font-header);
    color: var(--wall-color);
    font-size: 0.55rem;
    margin-bottom: 15px;
    border-bottom: 2px solid var(--wall-color);
    padding-bottom: 8px;
    text-shadow: none;
}

.privacy-box {
    background: rgba(0, 0, 0, 0.3);
    border-left: 3px solid var(--wall-color);
    padding: 15px;
    margin: 10px 0;
    border-radius: 0;
}

.privacy-box p {
    margin: 10px 0;
    line-height: 2;
    font-size: 0.45rem;
}

.privacy-box ul {
    margin: 10px 0;
    padding-left: 20px;
}

.privacy-box li {
    margin: 8px 0;
    line-height: 2;
    font-size: 0.45rem;
}

.privacy-note {
    color: var(--exit-color);
    font-weight: bold;
    font-size: 0.4rem;
    margin-top: 10px;
    padding: 8px;
    background: rgba(255, 255, 0, 0.1);
    border-radius: 0;
}

.cookie-table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
    font-size: 0.4rem;
}

.cookie-table th,
.cookie-table td {
    border: 1px solid var(--wall-color);
    padding: 10px;
    text-align: left;
}

.cookie-table th {
    background: rgba(0, 0, 0, 0.3);
    color: var(--wall-color);
    font-weight: bold;
    font-family: var(--font-header);
}

.cookie-table td {
    background: rgba(0, 0, 0, 0.15);
}

.cookie-table tr:hover td {
    background: rgba(0, 0, 0, 0.25);
}

.privacy-footer {
    background: #0a0a0a;
    border-top: 2px solid var(--player-color);
    padding: 20px;
    text-align: center;
}

.privacy-footer .btn {
    font-size: 0.55rem;
    padding: 15px 40px;
    min-width: 200px;
}

/* Mobile optimization */
@media (max-width: 768px) {
    .privacy-modal {
        padding: 10px;
    }

    .privacy-content {
        max-height: 95vh;
    }

    .privacy-header {
        padding: 15px;
    }

    .privacy-header h2 {
        font-size: 0.55rem;
    }

    .privacy-ascii {
        font-size: 0.35rem;
    }

    .privacy-body {
        padding: 15px;
    }

    .privacy-section h3 {
        font-size: 0.45rem;
    }

    .cookie-table {
        font-size: 0.35rem;
    }

    .cookie-table th,
    .cookie-table td {
        padding: 6px;
    }
}

/* Scrollbar styling for privacy modal */
.privacy-content::-webkit-scrollbar {
    width: 10px;
}

.privacy-content::-webkit-scrollbar-track {
    background: #0a0a0a;
}

.privacy-content::-webkit-scrollbar-thumb {
    background: var(--player-color);
    border-radius: 0;
}

.privacy-content::-webkit-scrollbar-thumb:hover {
    background: var(--wall-color);
}

/* ================================================================
   DIET THEME - The Struggle is Real
   ================================================================ */
.theme-diet {
    --bg-color: #fff9c4;
    --grid-bg: #fffde7;
    --grid-line: #fbc02d;
    --player-color: #ff5722;
    --zombie-color: #4caf50;
    --wall-color: #616161;
    --exit-color: #fdd835;
    --text-color: #3e2723;
}

.theme-diet .grid-container {
    background-color: var(--grid-bg);
    border: 3px solid #fbc02d;
    box-shadow: 0 0 20px rgba(251, 192, 45, 0.4);
    image-rendering: auto;
    /* Picnic table cloth pattern */
    background-image:
        linear-gradient(45deg, #fff59d 25%, transparent 25%, transparent 75%, #fff59d 75%, #fff59d),
        linear-gradient(45deg, #fff59d 25%, transparent 25%, transparent 75%, #fff59d 75%, #fff59d);
    background-position: 0 0, 10px 10px;
    background-size: 20px 20px;
}

.theme-diet .cell {
    border: 1px solid rgba(251, 192, 45, 0.2);
}

/* DIET PLAYER - Fat Man */
.theme-diet .player {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-diet .player::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/diet/player.svg') center / contain no-repeat !important;
    animation: wobble 0.5s ease-in-out infinite alternate;
    position: relative;
    border-radius: 0;
    box-shadow: none !important;
}

@keyframes wobble {
    from {
        transform: rotate(-5deg);
    }

    to {
        transform: rotate(5deg);
    }
}

/* DIET ZOMBIE - Salad */
.theme-diet .zombie {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    overflow: visible;
}

.theme-diet .zombie::after {
    content: '';
    width: 100%;
    height: 100%;
    background: transparent url('assets/skins/diet/zombie.svg') center / contain no-repeat !important;
    animation: bounce 0.5s infinite alternate;
    position: relative;
    box-shadow: none !important;
}

@keyframes bounce {
    from {
        transform: translateY(0);
    }

    to {
        transform: translateY(-5px);
    }
}

/* DIET WALL - Gym/Weights */
.theme-diet .wall {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-diet .wall::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/diet/wall.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: absolute;
    top: 0;
    left: 0;
}

/* DIET EXIT - Burger */
.theme-diet .exit {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    position: relative;
    overflow: visible;
}

.theme-diet .exit::after {
    content: '';
    width: 100%;
    height: 100%;
    background-image: url('assets/skins/diet/exit.svg');
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    position: absolute;
    top: 0;
    left: 0;
    filter: drop-shadow(0 0 5px gold);
    animation: pulseBurger 1s infinite alternate;
}

@keyframes pulseBurger {
    from {
        transform: scale(1);
    }

    to {
        transform: scale(1.1);
    }
}

/* Diet Header */
.theme-diet h1 {
    color: #5d4037;
    text-shadow: 1px 1px 0 #fff;
}

.theme-diet .stats span {
    color: #5d4037;
    font-weight: bold;
}

.menu-item.theme-diet .preview-part:nth-child(1) {
    background: #fff9c4;
}

.menu-item.theme-diet .preview-part:nth-child(2) {
    background: #FFCCBC;
    /* Fat man skin */
}

.menu-item.theme-diet .preview-part:nth-child(3) {
    background: #4CAF50;
    /* Salad */
}

.menu-item.theme-diet .preview-part:nth-child(4) {
    background: #FBC02D;
    /* Burger bun */
}